<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UbixOS: isa/fdc.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UbixOS
   &#160;<span id="projectnumber">2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d9/d43/fdc_8c_source.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">fdc.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d9/d43/fdc_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*-</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2002-2018 The UbixOS Project.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * All rights reserved.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This was developed by Christopher W. Olsen for the UbixOS Project.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without modification, are permitted</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * provided that the following conditions are met:</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * 1) Redistributions of source code must retain the above copyright notice, this list of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *    conditions, the following disclaimer and the list of authors.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * 2) Redistributions in binary form must reproduce the above copyright notice, this list of</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *    conditions, the following disclaimer and the list of authors in the documentation and/or</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *    other materials provided with the distribution.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * 3) Neither the name of the UbixOS Project nor the names of its contributors may be used to</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *    endorse or promote products derived from this software without specific prior written</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *    permission.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d5/d67/fdc_8h.html">isa/fdc.h</a>&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d2/d68/8259_8h.html">isa/8259.h</a>&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dd/d78/video_8h.html">sys/video.h</a>&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d5/d4a/gdt_8h.html">sys/gdt.h</a>&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d4/d35/idt_8h.html">sys/idt.h</a>&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../df/d63/spinlock_8h.html">ubixos/spinlock.h</a>&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dc/dac/io_8h.html">sys/io.h</a>&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d9/d95/dma_8h.html">sys/dma.h</a>&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d4/d7e/include_2sys_2device_8h.html">sys/device.h</a>&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../da/d28/kprintf_8h.html">lib/kprintf.h</a>&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d4/d03/kmalloc_8h.html">lib/kmalloc.h</a>&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d9/dd9/devfs_8h.html">devfs/devfs.h</a>&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/daf/structspinLock.html">spinLock</a> fdcSpinLock = <a class="code" href="../../df/d63/spinlock_8h.html#a0fe85a4f3642683148b25916d6c5eafd">SPIN_LOCK_INITIALIZER</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">bool</span> done = <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">static</span> <a class="code" href="../../df/d9c/structDrvGeom.html">drvGeom</a> geometry = { <a class="code" href="../../d5/d67/fdc_8h.html#a603e1e0a278c07c7338444e750ab35f3">dg144Heads</a>, <a class="code" href="../../d5/d67/fdc_8h.html#ae502999ac4dc1f4ef9e0a9db76b11a9a">dg144Tracks</a>, <a class="code" href="../../d5/d67/fdc_8h.html#a874c835339ecb6a4a5fdd7aab7bfbe02">dg144Spt</a> };</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> diskChange = <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> motor = <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <a class="code" href="../../dd/d1e/objgfx30_8h.html#a7e31ca7716b8d85dd473450a5c5e5a97">Int8</a> fdcTrack = 0xff;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">static</span> <a class="code" href="../../dd/d1e/objgfx30_8h.html#a7e31ca7716b8d85dd473450a5c5e5a97">Int8</a> sr0 = 0;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">int</span> timeOut = 0;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">static</span> <a class="code" href="../../dd/d1e/objgfx30_8h.html#a7e31ca7716b8d85dd473450a5c5e5a97">Int8</a> statSize = 0;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">static</span> <a class="code" href="../../dd/d1e/objgfx30_8h.html#a7e31ca7716b8d85dd473450a5c5e5a97">Int8</a> status[7] = { 0 };</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#a4235a63d122daa0852a95529c2f93498">   54</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d9/d43/fdc_8c.html#a4235a63d122daa0852a95529c2f93498">tbaddr</a> = 0x80000<a class="code" href="../../d0/d27/include_2sys_2types_8h.html#aa73214aa5f2f94f63d90bb4e3d99fe53">L</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#a62847307f237f6b4240d1eb4718b13e7">   56</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d9/d43/fdc_8c.html#a62847307f237f6b4240d1eb4718b13e7">fdcInit2</a>(<span class="keyword">struct</span> <a class="code" href="../../de/d35/structdevice__node.html">device_node</a> *dev) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  dev-&gt;<a class="code" href="../../de/d35/structdevice__node.html#a588d09d5dabf1c8866d359aaac799b1c">devInfo</a>-&gt;<a class="code" href="../../dc/de2/structdevice__interface.html#a82fda947114f5c8d53fb7acbd7eb0e21">size</a> = (1024 * 1450);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordflow">return</span> (0x0);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#a2fad92b12d9ff56bf300b7e53875c75d">   61</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d9/d43/fdc_8c.html#a2fad92b12d9ff56bf300b7e53875c75d">fdc_init</a>() {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../dc/de2/structdevice__interface.html">device_interface</a> *devInfo = (<span class="keyword">struct </span><a class="code" href="../../dc/de2/structdevice__interface.html">device_interface</a> *) <a class="code" href="../../d4/d03/kmalloc_8h.html#a150eab2ac4ce4553e21ca10e7f441762">kmalloc</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../dc/de2/structdevice__interface.html">device_interface</a>));</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="../../d4/d35/idt_8h.html#a174a47ed653fc64fff6b5bb1b895c2cf">setVector</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a2c2196dd9229105994bb3840347e6f05">floppyIsr</a>, <a class="code" href="../../d2/d68/8259_8h.html#a7d84962c1a1c225344a94545309f92fc">mVec</a> + 6, (<a class="code" href="../../d5/d4a/gdt_8h.html#a7eb6dc7004c613df58764da5df7d85d8">dInt</a> + <a class="code" href="../../d5/d4a/gdt_8h.html#abe5eb76416aff1d9114e1cdb8b0797fe">dPresent</a>));</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="../../d2/d68/8259_8h.html#a0ac079c4d770f02e505f4d8569a6960a">irqEnable</a>(6);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#a3aea9deb2a0bfea9ff05a898f4822e31">reset</a>();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  devInfo-&gt;<a class="code" href="../../dc/de2/structdevice__interface.html#a7eb42b0bb3e06dbc9183531a5e59ddb8">major</a> = 0x0;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  devInfo-&gt;<a class="code" href="../../dc/de2/structdevice__interface.html#a5a20c2397cc4ac3fbb9afe36bea1cfd1">init</a> = (<span class="keywordtype">void</span> *) &amp;<a class="code" href="../../d9/d43/fdc_8c.html#a62847307f237f6b4240d1eb4718b13e7">fdcInit2</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  devInfo-&gt;<a class="code" href="../../dc/de2/structdevice__interface.html#a876d3736a8df585bb06a82308724db6f">read</a> = <a class="code" href="../../d9/d43/fdc_8c.html#a1f2029ff3278c4b819c4420c168cc082">fdcRead</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  devInfo-&gt;<a class="code" href="../../dc/de2/structdevice__interface.html#a9d8ffee6ef57616ca48d1f7cfc54e461">write</a> = <a class="code" href="../../d9/d43/fdc_8c.html#acc9e5f35deea53f5b68798269b9be7c0">fdcWrite</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  devInfo-&gt;<a class="code" href="../../dc/de2/structdevice__interface.html#a816fbc5cd527e42d0a64a6d690062ed0">reset</a> = (<span class="keywordtype">void</span> *) <a class="code" href="../../d9/d43/fdc_8c.html#a3aea9deb2a0bfea9ff05a898f4822e31">reset</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="../../d4/d7e/include_2sys_2device_8h.html#a256b750ab99e3be9b83a9bfd37a22388">device_add</a>(0, <span class="charliteral">&#39;c&#39;</span>, devInfo);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="../../d4/d27/devfs_8c.html#ad568bae84bef3691539f1b1d0f6a54b4">devfs_makeNode</a>(<span class="stringliteral">&quot;fd0&quot;</span>, <span class="charliteral">&#39;b&#39;</span>, 0x0, 0x0);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">return</span> (0x0);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keyword">asm</span>(</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="stringliteral">&quot;.globl floppyIsr      \n&quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="stringliteral">&quot;floppyIsr:            \n&quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="stringliteral">&quot;  pusha               \n&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="stringliteral">&quot;  push %ss            \n&quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="stringliteral">&quot;  push %ds            \n&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="stringliteral">&quot;  push %es            \n&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="stringliteral">&quot;  push %fs            \n&quot;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="stringliteral">&quot;  push %gs            \n&quot;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="stringliteral">&quot;  call floppyIsrhndlr \n&quot;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="stringliteral">&quot;  pop %gs             \n&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="stringliteral">&quot;  pop %fs             \n&quot;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="stringliteral">&quot;  pop %es             \n&quot;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="stringliteral">&quot;  pop %ds             \n&quot;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="stringliteral">&quot;  pop %ss             \n&quot;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="stringliteral">&quot;  popa                \n&quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="stringliteral">&quot;  iret                \n&quot;</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#a5042dfaf2327990b6d1e1a7d3e01751c">   96</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/d43/fdc_8c.html#a5042dfaf2327990b6d1e1a7d3e01751c">floppyIsrhndlr</a>() {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  done = <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(0x20, 0x20);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">  101</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(<span class="keywordtype">int</span> <a class="code" href="../../dd/d1e/objgfx30_8h.html#a7e31ca7716b8d85dd473450a5c5e5a97">Int8</a>) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keyword">volatile</span> <span class="keywordtype">int</span> msr;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordtype">int</span> tmo;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">for</span> (tmo = 0; tmo &lt; 128; tmo++) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    msr = <a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a8ede3d2b611c5ae0d74bac02a68f998a">fdcMsr</a>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">if</span> ((msr &amp; 0xc0) == 0x80) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a298d327024dc99847e9064de3aa4388a">fdcData</a>, <a class="code" href="../../dd/d1e/objgfx30_8h.html#a7e31ca7716b8d85dd473450a5c5e5a97">Int8</a>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(0x80);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#ae266cdb34b69c65cfc108bbc72a4e3ff">  114</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d9/d43/fdc_8c.html#ae266cdb34b69c65cfc108bbc72a4e3ff">getByte</a>() {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keyword">volatile</span> <span class="keywordtype">int</span> msr;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordtype">int</span> tmo;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">for</span> (tmo = 0; tmo &lt; 128; tmo++) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    msr = <a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a8ede3d2b611c5ae0d74bac02a68f998a">fdcMsr</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> ((msr &amp; 0xd0) == 0xd0) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a298d327024dc99847e9064de3aa4388a">fdcData</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(0x80);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">return</span> (-1);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;}</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#a4b5fded251628524148377601d44377a">  127</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d9/d43/fdc_8c.html#a4b5fded251628524148377601d44377a">fdcRw</a>(<span class="keywordtype">int</span> block, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *blockBuffer, <span class="keywordtype">bool</span> <a class="code" href="../../de/d9a/gen__calls_8h.html#a5eff3a25d417fafce7c4f211db219ca2">read</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> numSectors) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordtype">int</span> head = 0x0, track = 0x0, sector = 0x0, tries = 0x0, copyCount = 0x0;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p_tbaddr = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) 0x80000;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p_blockbuff = blockBuffer;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">//kprintf(&quot;Block: [%i]\n&quot;,block);</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#aa0f8325f93de9409e403e620f914e69f">block2Hts</a>(block, &amp;head, &amp;track, &amp;sector);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#a94483feb4903fca9643813faae8a76ee">motorOn</a>();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../de/d9a/gen__calls_8h.html#a5eff3a25d417fafce7c4f211db219ca2">read</a> &amp;&amp; blockBuffer) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">/* copy data from data buffer into track buffer */</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">for</span> (copyCount = 0; copyCount &lt; (numSectors * 512); copyCount++) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      *p_tbaddr = *p_blockbuff;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      p_blockbuff++;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      p_tbaddr++;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">for</span> (tries = 0; tries &lt; 3; tries++) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a93ff9547b61a14618c87c5639a1252c5">fdcDir</a>) &amp; 0x80) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      diskChange = <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <a class="code" href="../../d9/d43/fdc_8c.html#a5886a896e5f0361f36b40d007db6e683">seek</a>(1); <span class="comment">/* clear &quot;disk change&quot; status */</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="../../d9/d43/fdc_8c.html#a2a16ea9e09b5f3dc2a559351afdc75f3">recalibrate</a>();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <a class="code" href="../../d9/d43/fdc_8c.html#a044fc0dea0fb35e6fab7f3c0badea2c9">motorOff</a>();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <a class="code" href="../../dd/d78/video_8h.html#a5429378b96a24fadfd2d1f8d777eb95a">kprint</a>(<span class="stringliteral">&quot;FDC: Disk change detected. Trying again.\n&quot;</span>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/d43/fdc_8c.html#a4b5fded251628524148377601d44377a">fdcRw</a>(block, blockBuffer, <a class="code" href="../../de/d9a/gen__calls_8h.html#a5eff3a25d417fafce7c4f211db219ca2">read</a>, numSectors);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d43/fdc_8c.html#a5886a896e5f0361f36b40d007db6e683">seek</a>(track)) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <a class="code" href="../../d9/d43/fdc_8c.html#a044fc0dea0fb35e6fab7f3c0badea2c9">motorOff</a>();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <a class="code" href="../../da/d28/kprintf_8h.html#a20b56810edb62a6fe59917015c30848f">kprintf</a>(<span class="stringliteral">&quot;FDC: Error seeking to track [%i]\n&quot;</span>, block);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#abcb9230a76b72528226c49a520db19f0">fdcCcr</a>, 0);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d9a/gen__calls_8h.html#a5eff3a25d417fafce7c4f211db219ca2">read</a>) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <a class="code" href="../../d9/d95/dma_8h.html#a7e2aa65e3e12777006ad192f7ff8bb5a">dmaXfer</a>(2, <a class="code" href="../../d9/d43/fdc_8c.html#a4235a63d122daa0852a95529c2f93498">tbaddr</a>, numSectors * 512, <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a6f35816c0b01ac39832de24459d82e27">cmdRead</a>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <a class="code" href="../../d9/d95/dma_8h.html#a7e2aa65e3e12777006ad192f7ff8bb5a">dmaXfer</a>(2, <a class="code" href="../../d9/d43/fdc_8c.html#a4235a63d122daa0852a95529c2f93498">tbaddr</a>, numSectors * 512, <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#afcfbcbee1143a2a689afc3a656646bad">cmdWrite</a>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(head &lt;&lt; 2);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(track);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(head);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(sector);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(2); <span class="comment">/* 512 Int8s/sector */</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(geometry.<a class="code" href="../../df/d9c/structDrvGeom.html#aa8dd21b2e6459ec0fabd9fe49835646a">spt</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span> (geometry.<a class="code" href="../../df/d9c/structDrvGeom.html#aa8dd21b2e6459ec0fabd9fe49835646a">spt</a> == <a class="code" href="../../d5/d67/fdc_8h.html#a874c835339ecb6a4a5fdd7aab7bfbe02">dg144Spt</a>) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a95339d9d677a8ac74a7a7459ad130739">dg144Gap3rw</a>); <span class="comment">/* gap 3 size for 1.44M read/write */</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a51916e330bac103bdf860461ae359e1e">dg168Gap3rw</a>); <span class="comment">/* gap 3 size for 1.68M read/write */</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(0xff); <span class="comment">/* DTL = unused */</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d43/fdc_8c.html#af5b6e5123d27381ca120b7b4fea7b242">waitFdc</a>(<a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>)) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <a class="code" href="../../dd/d78/video_8h.html#a5429378b96a24fadfd2d1f8d777eb95a">kprint</a>(<span class="stringliteral">&quot;Timed out, trying operation again after reset()\n&quot;</span>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <a class="code" href="../../d9/d43/fdc_8c.html#a3aea9deb2a0bfea9ff05a898f4822e31">reset</a>();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/d43/fdc_8c.html#a4b5fded251628524148377601d44377a">fdcRw</a>(block, blockBuffer, <a class="code" href="../../de/d9a/gen__calls_8h.html#a5eff3a25d417fafce7c4f211db219ca2">read</a>, numSectors);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> ((status[0] &amp; 0xc0) == 0)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordflow">break</span>; <span class="comment">/* worked! outta here! */</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="../../d9/d43/fdc_8c.html#a2a16ea9e09b5f3dc2a559351afdc75f3">recalibrate</a>(); <span class="comment">/* oops, try again... */</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#a044fc0dea0fb35e6fab7f3c0badea2c9">motorOff</a>();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../de/d9a/gen__calls_8h.html#a5eff3a25d417fafce7c4f211db219ca2">read</a> &amp;&amp; blockBuffer) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    p_blockbuff = blockBuffer;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    p_tbaddr = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) 0x80000;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">for</span> (copyCount = 0x0; copyCount &lt; (numSectors * 512); copyCount++) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      *p_blockbuff = *p_tbaddr;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      p_blockbuff++;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      p_tbaddr++;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordflow">return</span> (tries != 3);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#aa0f8325f93de9409e403e620f914e69f">  200</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/d43/fdc_8c.html#aa0f8325f93de9409e403e620f914e69f">block2Hts</a>(<span class="keywordtype">int</span> block, <span class="keywordtype">int</span> *head, <span class="keywordtype">int</span> *track, <span class="keywordtype">int</span> *sector) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  *head = (block % (geometry.<a class="code" href="../../df/d9c/structDrvGeom.html#aa8dd21b2e6459ec0fabd9fe49835646a">spt</a> * geometry.<a class="code" href="../../df/d9c/structDrvGeom.html#aedb24f8c9f3ae872be1cb104854dee1b">heads</a>)) / (geometry.<a class="code" href="../../df/d9c/structDrvGeom.html#aa8dd21b2e6459ec0fabd9fe49835646a">spt</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  *track = block / (geometry.<a class="code" href="../../df/d9c/structDrvGeom.html#aa8dd21b2e6459ec0fabd9fe49835646a">spt</a> * geometry.<a class="code" href="../../df/d9c/structDrvGeom.html#aedb24f8c9f3ae872be1cb104854dee1b">heads</a>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  *sector = block % geometry.<a class="code" href="../../df/d9c/structDrvGeom.html#aa8dd21b2e6459ec0fabd9fe49835646a">spt</a> + 1;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#a94483feb4903fca9643813faae8a76ee">  206</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/d43/fdc_8c.html#a94483feb4903fca9643813faae8a76ee">motorOn</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">if</span> (motor == <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#ae3bc9df62f197b42804259efb8ba44ec">fdcDor</a>, 0x1c);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    motor = <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#a044fc0dea0fb35e6fab7f3c0badea2c9">  213</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/d43/fdc_8c.html#a044fc0dea0fb35e6fab7f3c0badea2c9">motorOff</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">if</span> (motor == <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">//outportByte(fdcDor,0x0);</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">//outportByte(fdcDor,0x0C);</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    motor = <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#a5886a896e5f0361f36b40d007db6e683">  221</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d9/d43/fdc_8c.html#a5886a896e5f0361f36b40d007db6e683">seek</a>(<span class="keywordtype">int</span> track) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">if</span> (fdcTrack == track) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#ae2d2411a8ccdc868ab718da2b15348a9">cmdSeek</a>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(0);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(track);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d43/fdc_8c.html#af5b6e5123d27381ca120b7b4fea7b242">waitFdc</a>(<a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>)) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="../../da/d28/kprintf_8h.html#a20b56810edb62a6fe59917015c30848f">kprintf</a>(<span class="stringliteral">&quot;wait fdc failed\n&quot;</span>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">if</span> ((sr0 != 0x20) || (fdcTrack != track)) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#aa03242a5e44c4f2d10e15d296aca8c6b">  240</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d9/d43/fdc_8c.html#aa03242a5e44c4f2d10e15d296aca8c6b">readBlock</a>(<span class="keywordtype">int</span> block, <a class="code" href="../../dd/d1e/objgfx30_8h.html#a7e31ca7716b8d85dd473450a5c5e5a97">Int8</a> *blockBuffer, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> numSectors) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordtype">int</span> result = 0x0, loop = 0x0;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">if</span> (numSectors &gt; 1) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">for</span> (loop = 0; loop &lt; numSectors; loop++) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      result = <a class="code" href="../../d9/d43/fdc_8c.html#a4b5fded251628524148377601d44377a">fdcRw</a>(block + loop, blockBuffer + (loop * 512), <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>, 1);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d9/d43/fdc_8c.html#a4b5fded251628524148377601d44377a">fdcRw</a>(block, blockBuffer, <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>, numSectors);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#aebbcd7bc8695e888491b97b5bf27bd9c">  251</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d9/d43/fdc_8c.html#aebbcd7bc8695e888491b97b5bf27bd9c">writeBlock</a>(<span class="keywordtype">int</span> block, <a class="code" href="../../dd/d1e/objgfx30_8h.html#a7e31ca7716b8d85dd473450a5c5e5a97">Int8</a> *blockBuffer, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> numSectors) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d9/d43/fdc_8c.html#a4b5fded251628524148377601d44377a">fdcRw</a>(block, blockBuffer, <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>, numSectors);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#af5b6e5123d27381ca120b7b4fea7b242">  255</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d9/d43/fdc_8c.html#af5b6e5123d27381ca120b7b4fea7b242">waitFdc</a>(<span class="keywordtype">bool</span> sensei) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  timeOut = 50000;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">while</span> (!done &amp;&amp; timeOut)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    ;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  statSize = 0;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordflow">while</span> ((statSize &lt; 7) &amp;&amp; (<a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a8ede3d2b611c5ae0d74bac02a68f998a">fdcMsr</a>) &amp; (1 &lt;&lt; 4))) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    status[(int) statSize++] = <a class="code" href="../../d9/d43/fdc_8c.html#ae266cdb34b69c65cfc108bbc72a4e3ff">getByte</a>();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">if</span> (sensei) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a6afd950ba65e51d77abf2158216f0284">cmdSensei</a>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    sr0 = <a class="code" href="../../d9/d43/fdc_8c.html#ae266cdb34b69c65cfc108bbc72a4e3ff">getByte</a>();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    fdcTrack = <a class="code" href="../../d9/d43/fdc_8c.html#ae266cdb34b69c65cfc108bbc72a4e3ff">getByte</a>();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  done = <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">if</span> (!timeOut) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a93ff9547b61a14618c87c5639a1252c5">fdcDir</a>) &amp; 0x80) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      diskChange = <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#a2a16ea9e09b5f3dc2a559351afdc75f3">  280</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/d43/fdc_8c.html#a2a16ea9e09b5f3dc2a559351afdc75f3">recalibrate</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#a94483feb4903fca9643813faae8a76ee">motorOn</a>();</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a8a2fef7d1ed07757e099b8c7b29bfb09">cmdRecal</a>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(0);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#af5b6e5123d27381ca120b7b4fea7b242">waitFdc</a>(<a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#a044fc0dea0fb35e6fab7f3c0badea2c9">motorOff</a>();</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#a3aea9deb2a0bfea9ff05a898f4822e31">  288</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/d43/fdc_8c.html#a3aea9deb2a0bfea9ff05a898f4822e31">reset</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#ae3bc9df62f197b42804259efb8ba44ec">fdcDor</a>, 0);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  motor = <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#ae3bc9df62f197b42804259efb8ba44ec">fdcDor</a>, 0x0c);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  done = <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#af5b6e5123d27381ca120b7b4fea7b242">waitFdc</a>(<a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(<a class="code" href="../../d5/d67/fdc_8h.html#a6003c8e12dd1e4f765279854f016c0ae">cmdSpecify</a>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(0xdf);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a>(0x02);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#a5886a896e5f0361f36b40d007db6e683">seek</a>(1);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#a2a16ea9e09b5f3dc2a559351afdc75f3">recalibrate</a>();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  diskChange = <a class="code" href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#a1f2029ff3278c4b819c4420c168cc082">  303</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/d43/fdc_8c.html#a1f2029ff3278c4b819c4420c168cc082">fdcRead</a>(<span class="keywordtype">void</span> *<a class="code" href="../../dc/de2/structdevice__interface.html#aeacb2f431b14ddd1e9fe34db278dfc9e">info</a>, <span class="keywordtype">void</span> *baseAddr, <a class="code" href="../../dd/d1e/objgfx30_8h.html#ada085051a6d9a8e00a2cb256d1af14ba">uInt32</a> startSector, <a class="code" href="../../dd/d1e/objgfx30_8h.html#ada085051a6d9a8e00a2cb256d1af14ba">uInt32</a> sectorCount) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <a class="code" href="../../dc/d88/armv6_2spinlock_8c.html#a71f03d2ba55111c715b6068254847a53">spinLock</a>(&amp;fdcSpinLock);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#aa03242a5e44c4f2d10e15d296aca8c6b">readBlock</a>(startSector, baseAddr, sectorCount);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <a class="code" href="../../dc/d88/armv6_2spinlock_8c.html#ae29ab191c93f9ead066cb462dd2e7247">spinUnlock</a>(&amp;fdcSpinLock);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="../../d9/d43/fdc_8c.html#acc9e5f35deea53f5b68798269b9be7c0">  309</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d9/d43/fdc_8c.html#acc9e5f35deea53f5b68798269b9be7c0">fdcWrite</a>(<span class="keywordtype">void</span> *<a class="code" href="../../dc/de2/structdevice__interface.html#aeacb2f431b14ddd1e9fe34db278dfc9e">info</a>, <span class="keywordtype">void</span> *baseAddr, <a class="code" href="../../dd/d1e/objgfx30_8h.html#ada085051a6d9a8e00a2cb256d1af14ba">uInt32</a> startSector, <a class="code" href="../../dd/d1e/objgfx30_8h.html#ada085051a6d9a8e00a2cb256d1af14ba">uInt32</a> sectorCount) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <a class="code" href="../../d9/d43/fdc_8c.html#aebbcd7bc8695e888491b97b5bf27bd9c">writeBlock</a>(startSector, baseAddr, sectorCount);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">/***</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment"> $Log: fdc.c,v $</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"> Revision 1.1.1.1  2006/06/01 12:46:12  reddawg</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"> ubix2</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"> Revision 1.2  2005/10/12 00:13:37  reddawg</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"> Removed</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"> Revision 1.1.1.1  2005/09/26 17:24:01  reddawg</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"> no message</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"> Revision 1.24  2004/09/07 21:54:38  reddawg</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"> ok reverted back to old scheduling for now....</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"> Revision 1.23  2004/09/06 15:13:25  reddawg</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"> Last commit before FreeBSD 6.0</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"> Revision 1.22  2004/08/21 20:06:28  reddawg</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"> ok check out exec.c</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment"> Revision 1.21  2004/08/15 16:47:49  reddawg</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"> Fixed</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"> Revision 1.20  2004/08/15 00:33:02  reddawg</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"> Wow the ide driver works again</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"> Revision 1.19  2004/08/01 20:40:45  reddawg</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment"> Net related fixes</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"> Revision 1.18  2004/07/29 21:32:16  reddawg</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"> My quick lunchs breaks worth of updates....</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"> Revision 1.17  2004/07/27 08:03:36  reddawg</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment"> chg: stopped push all these extra registers I can&#39;t find a good reason as to why I was doing it</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment"> Revision 1.16  2004/07/22 17:32:25  reddawg</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment"> I broke it hopefully</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"> Revision 1.15  2004/07/21 10:02:09  reddawg</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment"> devfs: renamed functions</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"> device system: renamed functions</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment"> fdc: fixed a few potential bugs and cleaned up some unused variables</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> strol: fixed definition</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"> endtask: made it print out freepage debug info</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment"> kmalloc: fixed a huge memory leak we had some unhandled descriptor insertion so some descriptors were lost</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment"> ld: fixed a pointer conversion</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment"> file: cleaned up a few unused variables</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"> sched: broke task deletion</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"> kprintf: fixed ogPrintf definition</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment"> Revision 1.14  2004/07/17 02:38:31  reddawg</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"> Fixed a few problems</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"> Revision 1.13  2004/07/14 12:42:46  reddawg</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"> fdc: fdcInit to fdc_init</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"> Changed Startup Routines</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"> Revision 1.12  2004/06/04 10:19:42  reddawg</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment"> notes: we compile again, thank g-d anyways i was about to cry</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"> Revision 1.11  2004/05/20 22:51:09  reddawg</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment"> Cleaned Up Warnings</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"> Revision 1.10  2004/05/19 23:36:52  reddawg</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"> Bug Fixes</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"> Revision 1.9  2004/05/19 15:31:27  reddawg</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"> Fixed up the rest of the references</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"> Revision 1.8  2004/05/19 15:26:33  reddawg</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"> Fixed reference issues due to changes in driver subsystem</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"> Revision 1.7  2004/05/10 02:23:24  reddawg</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"> Minor Changes To Source Code To Prepare It For Open Source Release</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"> Revision 1.6  2004/04/30 14:16:04  reddawg</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment"> Fixed all the datatypes to be consistant uInt8,uInt16,uInt32,Int8,Int16,Int32</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment"> Revision 1.5  2004/04/29 15:29:20  reddawg</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment"> Fixed All Running Issues</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment"> Revision 1.4  2004/04/28 02:22:54  reddawg</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment"> This is a fiarly large commit but we are starting to use new driver model</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"> all around</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"> Revision 1.3  2004/04/26 22:22:33  reddawg</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment"> DevFS now uses correct size of device</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment"> Revision 1.2  2004/04/22 21:20:05  reddawg</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment"> FDC now adds drives to the devfs</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"> Revision 1.1.1.1  2004/04/15 12:07:09  reddawg</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment"> UbixOS v1.0</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"> Revision 1.6  2004/04/13 16:36:33  reddawg</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment"> Changed our copyright, it is all now under a BSD-Style license</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment"> END</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment"> ***/</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="a8259_8h_html"><div class="ttname"><a href="../../d2/d68/8259_8h.html">8259.h</a></div></div>
<div class="ttc" id="afdc_8h_html_a2c2196dd9229105994bb3840347e6f05"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#a2c2196dd9229105994bb3840347e6f05">floppyIsr</a></div><div class="ttdeci">void floppyIsr()</div></div>
<div class="ttc" id="adma_8h_html_a7e2aa65e3e12777006ad192f7ff8bb5a"><div class="ttname"><a href="../../d9/d95/dma_8h.html#a7e2aa65e3e12777006ad192f7ff8bb5a">dmaXfer</a></div><div class="ttdeci">void dmaXfer(uInt8 channel, uInt32 address, uInt length, uInt8 read)</div></div>
<div class="ttc" id="afdc_8h_html_abcb9230a76b72528226c49a520db19f0"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#abcb9230a76b72528226c49a520db19f0">fdcCcr</a></div><div class="ttdeci">#define fdcCcr</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00044">fdc.h:44</a></div></div>
<div class="ttc" id="aspinlock_8h_html"><div class="ttname"><a href="../../df/d63/spinlock_8h.html">spinlock.h</a></div></div>
<div class="ttc" id="astructdevice__interface_html"><div class="ttname"><a href="../../dc/de2/structdevice__interface.html">device_interface</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7e/include_2sys_2device_8h_source.html#l00047">device.h:47</a></div></div>
<div class="ttc" id="agdt_8h_html"><div class="ttname"><a href="../../d5/d4a/gdt_8h.html">gdt.h</a></div></div>
<div class="ttc" id="afdc_8c_html_a2a16ea9e09b5f3dc2a559351afdc75f3"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#a2a16ea9e09b5f3dc2a559351afdc75f3">recalibrate</a></div><div class="ttdeci">void recalibrate(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00280">fdc.c:280</a></div></div>
<div class="ttc" id="aobjgfx30_8h_html_ada085051a6d9a8e00a2cb256d1af14ba"><div class="ttname"><a href="../../dd/d1e/objgfx30_8h.html#ada085051a6d9a8e00a2cb256d1af14ba">uInt32</a></div><div class="ttdeci">unsigned long int uInt32</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1e/objgfx30_8h_source.html#l00049">objgfx30.h:49</a></div></div>
<div class="ttc" id="afdc_8h_html"><div class="ttname"><a href="../../d5/d67/fdc_8h.html">fdc.h</a></div></div>
<div class="ttc" id="agdt_8h_html_abe5eb76416aff1d9114e1cdb8b0797fe"><div class="ttname"><a href="../../d5/d4a/gdt_8h.html#abe5eb76416aff1d9114e1cdb8b0797fe">dPresent</a></div><div class="ttdeci">#define dPresent</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4a/gdt_8h_source.html#l00054">gdt.h:54</a></div></div>
<div class="ttc" id="ainclude_2sys_2types_8h_html_af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839"><div class="ttname"><a href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d27/include_2sys_2types_8h_source.html#l00082">types.h:82</a></div></div>
<div class="ttc" id="afdc_8c_html_a044fc0dea0fb35e6fab7f3c0badea2c9"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#a044fc0dea0fb35e6fab7f3c0badea2c9">motorOff</a></div><div class="ttdeci">void motorOff(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00213">fdc.c:213</a></div></div>
<div class="ttc" id="afdc_8h_html_a8ede3d2b611c5ae0d74bac02a68f998a"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#a8ede3d2b611c5ae0d74bac02a68f998a">fdcMsr</a></div><div class="ttdeci">#define fdcMsr</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00041">fdc.h:41</a></div></div>
<div class="ttc" id="aobjgfx30_8h_html_a7e31ca7716b8d85dd473450a5c5e5a97"><div class="ttname"><a href="../../dd/d1e/objgfx30_8h.html#a7e31ca7716b8d85dd473450a5c5e5a97">Int8</a></div><div class="ttdeci">signed char Int8</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1e/objgfx30_8h_source.html#l00043">objgfx30.h:43</a></div></div>
<div class="ttc" id="aidt_8h_html"><div class="ttname"><a href="../../d4/d35/idt_8h.html">idt.h</a></div></div>
<div class="ttc" id="afdc_8h_html_a874c835339ecb6a4a5fdd7aab7bfbe02"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#a874c835339ecb6a4a5fdd7aab7bfbe02">dg144Spt</a></div><div class="ttdeci">#define dg144Spt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00057">fdc.h:57</a></div></div>
<div class="ttc" id="avideo_8h_html"><div class="ttname"><a href="../../dd/d78/video_8h.html">video.h</a></div></div>
<div class="ttc" id="afdc_8c_html_acc9e5f35deea53f5b68798269b9be7c0"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#acc9e5f35deea53f5b68798269b9be7c0">fdcWrite</a></div><div class="ttdeci">void fdcWrite(void *info, void *baseAddr, uInt32 startSector, uInt32 sectorCount)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00309">fdc.c:309</a></div></div>
<div class="ttc" id="aio_8h_html_a8acc1a06073db2e7b92ffbd00fbd0cf1"><div class="ttname"><a href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a></div><div class="ttdeci">void outportByte(unsigned int, unsigned char)</div><div class="ttdoc">outputut one byte to specified port</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00072">io.c:72</a></div></div>
<div class="ttc" id="ainclude_2sys_2types_8h_html_af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a"><div class="ttname"><a href="../../d0/d27/include_2sys_2types_8h.html#af6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d27/include_2sys_2types_8h_source.html#l00082">types.h:82</a></div></div>
<div class="ttc" id="afdc_8h_html_a8a2fef7d1ed07757e099b8c7b29bfb09"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#a8a2fef7d1ed07757e099b8c7b29bfb09">cmdRecal</a></div><div class="ttdeci">#define cmdRecal</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00052">fdc.h:52</a></div></div>
<div class="ttc" id="aarmv6_2spinlock_8c_html_ae29ab191c93f9ead066cb462dd2e7247"><div class="ttname"><a href="../../dc/d88/armv6_2spinlock_8c.html#ae29ab191c93f9ead066cb462dd2e7247">spinUnlock</a></div><div class="ttdeci">void spinUnlock(spinLock_t *lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d88/armv6_2spinlock_8c_source.html#l00036">spinlock.c:36</a></div></div>
<div class="ttc" id="afdc_8c_html_aa0f8325f93de9409e403e620f914e69f"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#aa0f8325f93de9409e403e620f914e69f">block2Hts</a></div><div class="ttdeci">void block2Hts(int block, int *head, int *track, int *sector)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00200">fdc.c:200</a></div></div>
<div class="ttc" id="afdc_8c_html_a5042dfaf2327990b6d1e1a7d3e01751c"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#a5042dfaf2327990b6d1e1a7d3e01751c">floppyIsrhndlr</a></div><div class="ttdeci">void floppyIsrhndlr()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00096">fdc.c:96</a></div></div>
<div class="ttc" id="aspinlock_8h_html_a0fe85a4f3642683148b25916d6c5eafd"><div class="ttname"><a href="../../df/d63/spinlock_8h.html#a0fe85a4f3642683148b25916d6c5eafd">SPIN_LOCK_INITIALIZER</a></div><div class="ttdeci">#define SPIN_LOCK_INITIALIZER</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d63/spinlock_8h_source.html#l00036">spinlock.h:36</a></div></div>
<div class="ttc" id="ainclude_2sys_2device_8h_html_a256b750ab99e3be9b83a9bfd37a22388"><div class="ttname"><a href="../../d4/d7e/include_2sys_2device_8h.html#a256b750ab99e3be9b83a9bfd37a22388">device_add</a></div><div class="ttdeci">int device_add(int, char, struct device_interface *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d96/device_8c_source.html#l00049">device.c:49</a></div></div>
<div class="ttc" id="afdc_8c_html_a94483feb4903fca9643813faae8a76ee"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#a94483feb4903fca9643813faae8a76ee">motorOn</a></div><div class="ttdeci">void motorOn(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00206">fdc.c:206</a></div></div>
<div class="ttc" id="astructdevice__interface_html_a82fda947114f5c8d53fb7acbd7eb0e21"><div class="ttname"><a href="../../dc/de2/structdevice__interface.html#a82fda947114f5c8d53fb7acbd7eb0e21">device_interface::size</a></div><div class="ttdeci">uInt32 size</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7e/include_2sys_2device_8h_source.html#l00049">device.h:49</a></div></div>
<div class="ttc" id="aarmv6_2spinlock_8c_html_a71f03d2ba55111c715b6068254847a53"><div class="ttname"><a href="../../dc/d88/armv6_2spinlock_8c.html#a71f03d2ba55111c715b6068254847a53">spinLock</a></div><div class="ttdeci">void spinLock(spinLock_t *lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d88/armv6_2spinlock_8c_source.html#l00055">spinlock.c:55</a></div></div>
<div class="ttc" id="aio_8h_html_a77b934268de1b3ecdcf3f275413b3108"><div class="ttname"><a href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a></div><div class="ttdeci">unsigned char inportByte(unsigned int)</div><div class="ttdoc">input one byte from specified port</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00038">io.c:38</a></div></div>
<div class="ttc" id="afdc_8c_html_aa03242a5e44c4f2d10e15d296aca8c6b"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#aa03242a5e44c4f2d10e15d296aca8c6b">readBlock</a></div><div class="ttdeci">bool readBlock(int block, Int8 *blockBuffer, unsigned long numSectors)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00240">fdc.c:240</a></div></div>
<div class="ttc" id="afdc_8c_html_a4235a63d122daa0852a95529c2f93498"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#a4235a63d122daa0852a95529c2f93498">tbaddr</a></div><div class="ttdeci">unsigned long tbaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00054">fdc.c:54</a></div></div>
<div class="ttc" id="afdc_8c_html_a3aea9deb2a0bfea9ff05a898f4822e31"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#a3aea9deb2a0bfea9ff05a898f4822e31">reset</a></div><div class="ttdeci">void reset(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00288">fdc.c:288</a></div></div>
<div class="ttc" id="afdc_8c_html_aebbcd7bc8695e888491b97b5bf27bd9c"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#aebbcd7bc8695e888491b97b5bf27bd9c">writeBlock</a></div><div class="ttdeci">bool writeBlock(int block, Int8 *blockBuffer, unsigned long numSectors)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00251">fdc.c:251</a></div></div>
<div class="ttc" id="akprintf_8h_html"><div class="ttname"><a href="../../da/d28/kprintf_8h.html">kprintf.h</a></div></div>
<div class="ttc" id="afdc_8c_html_a1f2029ff3278c4b819c4420c168cc082"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#a1f2029ff3278c4b819c4420c168cc082">fdcRead</a></div><div class="ttdeci">void fdcRead(void *info, void *baseAddr, uInt32 startSector, uInt32 sectorCount)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00303">fdc.c:303</a></div></div>
<div class="ttc" id="afdc_8c_html_a5886a896e5f0361f36b40d007db6e683"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#a5886a896e5f0361f36b40d007db6e683">seek</a></div><div class="ttdeci">bool seek(int track)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00221">fdc.c:221</a></div></div>
<div class="ttc" id="astructdevice__node_html"><div class="ttname"><a href="../../de/d35/structdevice__node.html">device_node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7e/include_2sys_2device_8h_source.html#l00034">device.h:34</a></div></div>
<div class="ttc" id="astructDrvGeom_html_aa8dd21b2e6459ec0fabd9fe49835646a"><div class="ttname"><a href="../../df/d9c/structDrvGeom.html#aa8dd21b2e6459ec0fabd9fe49835646a">DrvGeom::spt</a></div><div class="ttdeci">Int8 spt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00063">fdc.h:63</a></div></div>
<div class="ttc" id="afdc_8c_html_a2fad92b12d9ff56bf300b7e53875c75d"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#a2fad92b12d9ff56bf300b7e53875c75d">fdc_init</a></div><div class="ttdeci">int fdc_init()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00061">fdc.c:61</a></div></div>
<div class="ttc" id="astructDrvGeom_html"><div class="ttname"><a href="../../df/d9c/structDrvGeom.html">DrvGeom</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00034">fdc.h:34</a></div></div>
<div class="ttc" id="afdc_8c_html_ae266cdb34b69c65cfc108bbc72a4e3ff"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#ae266cdb34b69c65cfc108bbc72a4e3ff">getByte</a></div><div class="ttdeci">int getByte()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00114">fdc.c:114</a></div></div>
<div class="ttc" id="astructDrvGeom_html_aedb24f8c9f3ae872be1cb104854dee1b"><div class="ttname"><a href="../../df/d9c/structDrvGeom.html#aedb24f8c9f3ae872be1cb104854dee1b">DrvGeom::heads</a></div><div class="ttdeci">Int8 heads</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00061">fdc.h:61</a></div></div>
<div class="ttc" id="astructdevice__interface_html_a5a20c2397cc4ac3fbb9afe36bea1cfd1"><div class="ttname"><a href="../../dc/de2/structdevice__interface.html#a5a20c2397cc4ac3fbb9afe36bea1cfd1">device_interface::init</a></div><div class="ttdeci">int(* init)(void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7e/include_2sys_2device_8h_source.html#l00055">device.h:55</a></div></div>
<div class="ttc" id="astructdevice__interface_html_a816fbc5cd527e42d0a64a6d690062ed0"><div class="ttname"><a href="../../dc/de2/structdevice__interface.html#a816fbc5cd527e42d0a64a6d690062ed0">device_interface::reset</a></div><div class="ttdeci">void(* reset)(void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7e/include_2sys_2device_8h_source.html#l00054">device.h:54</a></div></div>
<div class="ttc" id="afdc_8h_html_a6afd950ba65e51d77abf2158216f0284"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#a6afd950ba65e51d77abf2158216f0284">cmdSensei</a></div><div class="ttdeci">#define cmdSensei</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00051">fdc.h:51</a></div></div>
<div class="ttc" id="afdc_8h_html_ae3bc9df62f197b42804259efb8ba44ec"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#ae3bc9df62f197b42804259efb8ba44ec">fdcDor</a></div><div class="ttdeci">#define fdcDor</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00045">fdc.h:45</a></div></div>
<div class="ttc" id="adevfs_8c_html_ad568bae84bef3691539f1b1d0f6a54b4"><div class="ttname"><a href="../../d4/d27/devfs_8c.html#ad568bae84bef3691539f1b1d0f6a54b4">devfs_makeNode</a></div><div class="ttdeci">int devfs_makeNode(char *name, uInt8 type, uInt16 major, uInt16 minor)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/devfs_8c_source.html#l00174">devfs.c:174</a></div></div>
<div class="ttc" id="astructdevice__interface_html_a9d8ffee6ef57616ca48d1f7cfc54e461"><div class="ttname"><a href="../../dc/de2/structdevice__interface.html#a9d8ffee6ef57616ca48d1f7cfc54e461">device_interface::write</a></div><div class="ttdeci">int(* write)(void *, void *, uInt32, uInt32)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7e/include_2sys_2device_8h_source.html#l00053">device.h:53</a></div></div>
<div class="ttc" id="agen__calls_8h_html_a5eff3a25d417fafce7c4f211db219ca2"><div class="ttname"><a href="../../de/d9a/gen__calls_8h.html#a5eff3a25d417fafce7c4f211db219ca2">read</a></div><div class="ttdeci">int read(struct thread *td, struct read_args *uap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d0a/gen__calls_8c_source.html#l00100">gen_calls.c:100</a></div></div>
<div class="ttc" id="afdc_8c_html_ae708fa84d19a72e77185b3a214e81573"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#ae708fa84d19a72e77185b3a214e81573">sendByte</a></div><div class="ttdeci">void sendByte(int Int8)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00101">fdc.c:101</a></div></div>
<div class="ttc" id="afdc_8h_html_a93ff9547b61a14618c87c5639a1252c5"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#a93ff9547b61a14618c87c5639a1252c5">fdcDir</a></div><div class="ttdeci">#define fdcDir</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00043">fdc.h:43</a></div></div>
<div class="ttc" id="astructdevice__interface_html_a876d3736a8df585bb06a82308724db6f"><div class="ttname"><a href="../../dc/de2/structdevice__interface.html#a876d3736a8df585bb06a82308724db6f">device_interface::read</a></div><div class="ttdeci">int(* read)(void *, void *, uInt32, uInt32)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7e/include_2sys_2device_8h_source.html#l00052">device.h:52</a></div></div>
<div class="ttc" id="adevfs_8h_html"><div class="ttname"><a href="../../d9/dd9/devfs_8h.html">devfs.h</a></div></div>
<div class="ttc" id="ainclude_2sys_2device_8h_html"><div class="ttname"><a href="../../d4/d7e/include_2sys_2device_8h.html">device.h</a></div></div>
<div class="ttc" id="afdc_8h_html_a51916e330bac103bdf860461ae359e1e"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#a51916e330bac103bdf860461ae359e1e">dg168Gap3rw</a></div><div class="ttdeci">#define dg168Gap3rw</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00059">fdc.h:59</a></div></div>
<div class="ttc" id="agdt_8h_html_a7eb6dc7004c613df58764da5df7d85d8"><div class="ttname"><a href="../../d5/d4a/gdt_8h.html#a7eb6dc7004c613df58764da5df7d85d8">dInt</a></div><div class="ttdeci">#define dInt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4a/gdt_8h_source.html#l00043">gdt.h:43</a></div></div>
<div class="ttc" id="afdc_8h_html_ae2d2411a8ccdc868ab718da2b15348a9"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#ae2d2411a8ccdc868ab718da2b15348a9">cmdSeek</a></div><div class="ttdeci">#define cmdSeek</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00050">fdc.h:50</a></div></div>
<div class="ttc" id="afdc_8h_html_ae502999ac4dc1f4ef9e0a9db76b11a9a"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#ae502999ac4dc1f4ef9e0a9db76b11a9a">dg144Tracks</a></div><div class="ttdeci">#define dg144Tracks</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00056">fdc.h:56</a></div></div>
<div class="ttc" id="a8259_8h_html_a7d84962c1a1c225344a94545309f92fc"><div class="ttname"><a href="../../d2/d68/8259_8h.html#a7d84962c1a1c225344a94545309f92fc">mVec</a></div><div class="ttdeci">#define mVec</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d68/8259_8h_source.html#l00041">8259.h:41</a></div></div>
<div class="ttc" id="afdc_8h_html_a6003c8e12dd1e4f765279854f016c0ae"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#a6003c8e12dd1e4f765279854f016c0ae">cmdSpecify</a></div><div class="ttdeci">#define cmdSpecify</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00053">fdc.h:53</a></div></div>
<div class="ttc" id="astructdevice__interface_html_aeacb2f431b14ddd1e9fe34db278dfc9e"><div class="ttname"><a href="../../dc/de2/structdevice__interface.html#aeacb2f431b14ddd1e9fe34db278dfc9e">device_interface::info</a></div><div class="ttdeci">void * info</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7e/include_2sys_2device_8h_source.html#l00051">device.h:51</a></div></div>
<div class="ttc" id="afdc_8h_html_a6f35816c0b01ac39832de24459d82e27"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#a6f35816c0b01ac39832de24459d82e27">cmdRead</a></div><div class="ttdeci">#define cmdRead</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00049">fdc.h:49</a></div></div>
<div class="ttc" id="akmalloc_8h_html_a150eab2ac4ce4553e21ca10e7f441762"><div class="ttname"><a href="../../d4/d03/kmalloc_8h.html#a150eab2ac4ce4553e21ca10e7f441762">kmalloc</a></div><div class="ttdeci">void * kmalloc(uInt32 len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1a/kmalloc_8c_source.html#l00241">kmalloc.c:241</a></div></div>
<div class="ttc" id="astructspinLock_html"><div class="ttname"><a href="../../d1/daf/structspinLock.html">spinLock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d63/spinlock_8h_source.html#l00041">spinlock.h:41</a></div></div>
<div class="ttc" id="aidt_8h_html_a174a47ed653fc64fff6b5bb1b895c2cf"><div class="ttname"><a href="../../d4/d35/idt_8h.html#a174a47ed653fc64fff6b5bb1b895c2cf">setVector</a></div><div class="ttdeci">void setVector(void *handler, unsigned char interrupt, unsigned short controlMajor)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d05/idt_8c_source.html#l00208">idt.c:208</a></div></div>
<div class="ttc" id="aio_8h_html"><div class="ttname"><a href="../../dc/dac/io_8h.html">io.h</a></div></div>
<div class="ttc" id="a8259_8h_html_a0ac079c4d770f02e505f4d8569a6960a"><div class="ttname"><a href="../../d2/d68/8259_8h.html#a0ac079c4d770f02e505f4d8569a6960a">irqEnable</a></div><div class="ttdeci">void irqEnable(uInt16 irqNo)</div></div>
<div class="ttc" id="ainclude_2sys_2types_8h_html_aa73214aa5f2f94f63d90bb4e3d99fe53"><div class="ttname"><a href="../../d0/d27/include_2sys_2types_8h.html#aa73214aa5f2f94f63d90bb4e3d99fe53">L</a></div><div class="ttdeci">#define L</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d27/include_2sys_2types_8h_source.html#l00155">types.h:155</a></div></div>
<div class="ttc" id="astructdevice__node_html_a588d09d5dabf1c8866d359aaac799b1c"><div class="ttname"><a href="../../de/d35/structdevice__node.html#a588d09d5dabf1c8866d359aaac799b1c">device_node::devInfo</a></div><div class="ttdeci">struct device_interface * devInfo</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7e/include_2sys_2device_8h_source.html#l00037">device.h:37</a></div></div>
<div class="ttc" id="afdc_8c_html_a62847307f237f6b4240d1eb4718b13e7"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#a62847307f237f6b4240d1eb4718b13e7">fdcInit2</a></div><div class="ttdeci">int fdcInit2(struct device_node *dev)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00056">fdc.c:56</a></div></div>
<div class="ttc" id="akprintf_8h_html_a20b56810edb62a6fe59917015c30848f"><div class="ttname"><a href="../../da/d28/kprintf_8h.html#a20b56810edb62a6fe59917015c30848f">kprintf</a></div><div class="ttdeci">int kprintf(const char *,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d87/kprintf_8c_source.html#l00259">kprintf.c:259</a></div></div>
<div class="ttc" id="afdc_8c_html_a4b5fded251628524148377601d44377a"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#a4b5fded251628524148377601d44377a">fdcRw</a></div><div class="ttdeci">bool fdcRw(int block, unsigned char *blockBuffer, bool read, unsigned long numSectors)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00127">fdc.c:127</a></div></div>
<div class="ttc" id="afdc_8h_html_a603e1e0a278c07c7338444e750ab35f3"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#a603e1e0a278c07c7338444e750ab35f3">dg144Heads</a></div><div class="ttdeci">#define dg144Heads</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00055">fdc.h:55</a></div></div>
<div class="ttc" id="astructdevice__interface_html_a7eb42b0bb3e06dbc9183531a5e59ddb8"><div class="ttname"><a href="../../dc/de2/structdevice__interface.html#a7eb42b0bb3e06dbc9183531a5e59ddb8">device_interface::major</a></div><div class="ttdeci">int major</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7e/include_2sys_2device_8h_source.html#l00050">device.h:50</a></div></div>
<div class="ttc" id="afdc_8h_html_a298d327024dc99847e9064de3aa4388a"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#a298d327024dc99847e9064de3aa4388a">fdcData</a></div><div class="ttdeci">#define fdcData</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00042">fdc.h:42</a></div></div>
<div class="ttc" id="akmalloc_8h_html"><div class="ttname"><a href="../../d4/d03/kmalloc_8h.html">kmalloc.h</a></div></div>
<div class="ttc" id="avideo_8h_html_a5429378b96a24fadfd2d1f8d777eb95a"><div class="ttname"><a href="../../dd/d78/video_8h.html#a5429378b96a24fadfd2d1f8d777eb95a">kprint</a></div><div class="ttdeci">void kprint(char *string)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d45/video_8c_source.html#l00058">video.c:58</a></div></div>
<div class="ttc" id="adma_8h_html"><div class="ttname"><a href="../../d9/d95/dma_8h.html">dma.h</a></div></div>
<div class="ttc" id="afdc_8c_html_af5b6e5123d27381ca120b7b4fea7b242"><div class="ttname"><a href="../../d9/d43/fdc_8c.html#af5b6e5123d27381ca120b7b4fea7b242">waitFdc</a></div><div class="ttdeci">bool waitFdc(bool sensei)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d43/fdc_8c_source.html#l00255">fdc.c:255</a></div></div>
<div class="ttc" id="afdc_8h_html_a95339d9d677a8ac74a7a7459ad130739"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#a95339d9d677a8ac74a7a7459ad130739">dg144Gap3rw</a></div><div class="ttdeci">#define dg144Gap3rw</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00058">fdc.h:58</a></div></div>
<div class="ttc" id="afdc_8h_html_afcfbcbee1143a2a689afc3a656646bad"><div class="ttname"><a href="../../d5/d67/fdc_8h.html#afcfbcbee1143a2a689afc3a656646bad">cmdWrite</a></div><div class="ttdeci">#define cmdWrite</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d67/fdc_8h_source.html#l00048">fdc.h:48</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_3072dafebbfa7892dc4725aed51ee84c.html">isa</a></li><li class="navelem"><a class="el" href="../../d9/d43/fdc_8c.html">fdc.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
