<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UbixOS: isa/ne2k.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UbixOS
   &#160;<span id="projectnumber">2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dd/d07/ne2k_8c_source.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">ne2k.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../dd/d07/ne2k_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*-</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2002-2018 The UbixOS Project.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * All rights reserved.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This was developed by Christopher W. Olsen for the UbixOS Project.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without modification, are permitted</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * provided that the following conditions are met:</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * 1) Redistributions of source code must retain the above copyright notice, this list of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *    conditions, the following disclaimer and the list of authors.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * 2) Redistributions in binary form must reproduce the above copyright notice, this list of</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *    conditions, the following disclaimer and the list of authors in the documentation and/or</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *    other materials provided with the distribution.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * 3) Neither the name of the UbixOS Project nor the names of its contributors may be used to</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *    endorse or promote products derived from this software without specific prior written</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *    permission.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d3/d6c/ne2k_8h.html">isa/ne2k.h</a>&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d9/d69/netif_8h.html">net/netif.h</a>&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d2/d68/8259_8h.html">isa/8259.h</a>&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../df/dfa/device_8old_8h.html">sys/device.old.h</a>&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dc/dac/io_8h.html">sys/io.h</a>&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d4/d35/idt_8h.html">sys/idt.h</a>&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d4/d03/kmalloc_8h.html">lib/kmalloc.h</a>&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../da/d28/kprintf_8h.html">lib/kprintf.h</a>&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../da/d66/string_8h.html">string.h</a>&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d3/d24/kpanic_8h.html">ubixos/kpanic.h</a>&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d2/d48/vitals_8h.html">ubixos/vitals.h</a>&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../df/d63/spinlock_8h.html">ubixos/spinlock.h</a>&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dc/da7/assert_8h.html">assert.h</a>&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/daf/structspinLock.html">spinLock</a> ne2k_spinLock = <a class="code" href="../../df/d63/spinlock_8h.html#a0fe85a4f3642683148b25916d6c5eafd">SPIN_LOCK_INITIALIZER</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> dp_pkt2user(<span class="keyword">struct</span> <a class="code" href="../../da/d54/structdevice.html">device</a> *dev, <span class="keywordtype">int</span> page, <span class="keywordtype">int</span> length);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> getblock(<span class="keyword">struct</span> <a class="code" href="../../da/d54/structdevice.html">device</a> *dev, <span class="keywordtype">int</span> page, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> size, <span class="keywordtype">void</span> *dst);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> dp_recv(<span class="keyword">struct</span> <a class="code" href="../../da/d54/structdevice.html">device</a> *);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../db/d2a/structnicBuffer.html">nicBuffer</a> *ne2kBuffer = 0x0;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../da/d54/structdevice.html">device</a> *mDev = 0x0;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">asm</span>(</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="stringliteral">&quot;.globl ne2kISR         \n&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="stringliteral">&quot;ne2kISR:               \n&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="stringliteral">&quot;  pusha                \n&quot;</span> <span class="comment">/* Save all registers           */</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="stringliteral">&quot;  call ne2kHandler     \n&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="stringliteral">&quot;  popa                 \n&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="stringliteral">&quot;  iret                 \n&quot;</span> <span class="comment">/* Exit interrupt               */</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/************************************************************************</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> Function: int ne2kInit(uInt32 ioAddr)</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> Description: This Function Will Initialize The Programmable Timer</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> Notes:</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../dd/d07/ne2k_8c.html#a033e069050ace667acb10ed9ffc8ac6c">   68</a></span>&#160;<span class="comment"> ************************************************************************/</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dd/d07/ne2k_8c.html#a033e069050ace667acb10ed9ffc8ac6c">ne2k_init</a>() {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  mDev = (<span class="keyword">struct </span><a class="code" href="../../da/d54/structdevice.html">device</a> *) <a class="code" href="../../d4/d03/kmalloc_8h.html#a150eab2ac4ce4553e21ca10e7f441762">kmalloc</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../da/d54/structdevice.html">device</a>));</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> = 0x280;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a893bc785f272d1fedb2b4c14e31a7f35">irq</a> = 10;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="../../d4/d35/idt_8h.html#a174a47ed653fc64fff6b5bb1b895c2cf">setVector</a>(&amp;<a class="code" href="../../d3/d6c/ne2k_8h.html#aa1d4735355686cbdc2d6bf145c413db3">ne2kISR</a>, <a class="code" href="../../d2/d68/8259_8h.html#a7d84962c1a1c225344a94545309f92fc">mVec</a> + 10, <a class="code" href="../../d5/d4a/gdt_8h.html#abe5eb76416aff1d9114e1cdb8b0797fe">dPresent</a> + <a class="code" href="../../d5/d4a/gdt_8h.html#a7eb6dc7004c613df58764da5df7d85d8">dInt</a> + <a class="code" href="../../d5/d4a/gdt_8h.html#a5ee8638767e24765a2690483745d60d0">dDpl0</a>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="../../d2/d68/8259_8h.html#a0ac079c4d770f02e505f4d8569a6960a">irqEnable</a>(10);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">//  kprintf(&quot;ne0 - irq: %i, ioAddr: 0x%X MAC: %X:%X:%X:%X:%X:%X\n&quot;,dev-&gt;irq,dev-&gt;ioAddr,dev-&gt;net-&gt;mac[0] &amp; 0xFF,dev-&gt;net-&gt;mac[1] &amp; 0xFF,dev-&gt;net-&gt;mac[2] &amp; 0xFF,dev-&gt;net-&gt;mac[3] &amp; 0xFF,dev-&gt;net-&gt;mac[4] &amp; 0xFF,dev-&gt;net-&gt;mac[5] &amp; 0xFF);</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a55d8236fd5c94eb16a5a06c3e4b07df1">NE_CMD</a>, 0x21);        <span class="comment">// stop mode</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a759300669dab4522e8c261d764303a9b">NE_DCR</a>, 0x29);         <span class="comment">// 0x29 data config reg</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#ab8733e4b199b85891fb58c80bd65967a">NE_RBCR0</a>, 0x00);       <span class="comment">// LOW byte count (remote)</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#ac023921e5da8473a400c04b2e268c621">NE_RBCR1</a>, 0x00);       <span class="comment">// HIGH byte count (remote)</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#ae0e015081ca05ecec4bf833265485fb9">NE_RCR</a>, 0x3C);         <span class="comment">// receive config reg</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#aea9754b13e450b45d0eb6d79e0a1f4aa">NE_TCR</a>, 0x02);         <span class="comment">// LOOP mode (temp)</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a78aa15aa3cd9df670d1724be92b0157d">NE_PSTART</a>, <a class="code" href="../../d3/d6c/ne2k_8h.html#a819b8c4fa81871ceacc1790d6fd2b2f1">startPage</a>); <span class="comment">// 0x26 PAGE start</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a4c97ad2e89582cb65022a052df40c04a">NE_BNRY</a>, <a class="code" href="../../d3/d6c/ne2k_8h.html#a819b8c4fa81871ceacc1790d6fd2b2f1">startPage</a>);   <span class="comment">// 0x26 BOUNDARY</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a4991431a50163bff66590bf8a7fb3c72">NE_PSTOP</a>, <a class="code" href="../../d3/d6c/ne2k_8h.html#ae05994559a4ee216a39b3307b7911493">stopPage</a>);   <span class="comment">// 0x40 PAGE stop</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a0b931a9b3f618839c02bc888b12fad6b">NE_ISR</a>, 0xFF);         <span class="comment">// interrupt status reg</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a04dfd3c3cd4a3f758cb038b78231493f">NE_IMR</a>, 0x0B);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a55d8236fd5c94eb16a5a06c3e4b07df1">NE_CMD</a>, 0x61);         <span class="comment">// PAGE 1 regs</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#ab748b31fd480e8195caac541bc792c2b">DP_MAR0</a>, 0xFF);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a6e5cdffc808e98e09eca1efad797abf4">DP_MAR1</a>, 0xFF);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a6aff3543036b8ddf515d243b0e1ddf34">DP_MAR2</a>, 0xFF);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a1a62c9c151ca3a621f0683d0eaba12fe">DP_MAR3</a>, 0xFF);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#ace5a77fb812564273e5304dd138ac29f">DP_MAR4</a>, 0xFF);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a0ec81b4dbe6150ae308588ed7de0f686">DP_MAR5</a>, 0xFF);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a649d4943e589ed684b2e0faf811dc0af">DP_MAR6</a>, 0xFF);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#afc53aa624a738deb114bf3d20257f108">DP_MAR7</a>, 0xFF);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a8336bb3cb0a54a93522379477340fdec">DP_CURR</a>, <a class="code" href="../../d3/d6c/ne2k_8h.html#a819b8c4fa81871ceacc1790d6fd2b2f1">startPage</a> + 1);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a55d8236fd5c94eb16a5a06c3e4b07df1">NE_CMD</a>, 0x20);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a2dcfc12834d5a417dcf43e2ca248f0cd">DP_CNTR0</a>); <span class="comment">/* reset counters by reading */</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#ae99a5201b20f9fd87b195c1074a643ec">DP_CNTR1</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#ab56dccd8151d77ad3dbd832b65601af0">DP_CNTR2</a>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#aea9754b13e450b45d0eb6d79e0a1f4aa">NE_TCR</a>, 0x00);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a55d8236fd5c94eb16a5a06c3e4b07df1">NE_CMD</a>, 0x0);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a759300669dab4522e8c261d764303a9b">NE_DCR</a>, 0x29);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="../../da/d28/kprintf_8h.html#a20b56810edb62a6fe59917015c30848f">kprintf</a>(<span class="stringliteral">&quot;Initialized&quot;</span>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">/* Return so we know everything went well */</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">return</span> (0x0);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="../../dd/d07/ne2k_8c.html#af6446fd497eb16b637ebed77c7a0aeaf">  113</a></span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dd/d07/ne2k_8c.html#af6446fd497eb16b637ebed77c7a0aeaf">PCtoNIC</a>(<span class="keyword">struct</span> <a class="code" href="../../da/d54/structdevice.html">device</a> *dev, <span class="keywordtype">void</span> *packet, <span class="keywordtype">int</span> length) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordtype">int</span> i = 0x0;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="../../dd/d1e/objgfx30_8h.html#a81f3b46fa4ddd984830104840a08da82">uInt16</a> *packet16 = (<a class="code" href="../../dd/d1e/objgfx30_8h.html#a81f3b46fa4ddd984830104840a08da82">uInt16</a> *) packet;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="../../dd/d1e/objgfx30_8h.html#aa4e0f27a9aca905e340c06d2dcae843c">uInt8</a> *packet8 = (<a class="code" href="../../dd/d1e/objgfx30_8h.html#aa4e0f27a9aca905e340c06d2dcae843c">uInt8</a> *) packet;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="../../dd/d1e/objgfx30_8h.html#aa4e0f27a9aca905e340c06d2dcae843c">uInt8</a> word16 = 0x1;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a>) &amp; 0x04) == 0x04) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="../../dc/d94/armv6_2kpanic_8c.html#adb9a182aa071791a306163d50d653deb">kpanic</a>(<span class="stringliteral">&quot;Device Not Ready\n&quot;</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="../../dc/da7/assert_8h.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a>(length);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">if</span> ((word16 == 1) &amp;&amp; (length &amp; 0x01)) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    length++;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#ab5b4b2e9eb20e5ec41e7784bf5148900">EN0_RCNTLO</a>, (length &amp; 0xFF));</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a13af46188f103450f08ce0346bde34af">EN0_RCNTHI</a>, (length &gt;&gt; 8));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a352cf7775b146c81c2e1cf81110c9c7e">EN0_RSARLO</a>, 0x0);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a9834bfab75d2f822b0f684e612917281">EN0_RSARHI</a>, 0x41);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a>, <a class="code" href="../../d3/d6c/ne2k_8h.html#a9220d4793c7d8dd1844a006713faafee">E8390_RWRITE</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#ac3d2ce0fc9cc0e4e0c6e6a1484f08ddf">E8390_START</a>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">if</span> (word16 != 0x0) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; length / 2; i++) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <a class="code" href="../../dc/dac/io_8h.html#a243f6b6d22cc5948908b764d58efc2b0">outportWord</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a5b7cdde018b5a4d42f91183d216d3f0d">NE_DATAPORT</a>, packet16[i]);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; length; i++) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a5b7cdde018b5a4d42f91183d216d3f0d">NE_DATAPORT</a>, packet8[i]);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt;= 100; i++) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a94ed811925b8c9a71ec0c3590a15868c">EN0_ISR</a>) &amp; 0x40) == 0x40) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a94ed811925b8c9a71ec0c3590a15868c">EN0_ISR</a>, 0x40);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a6c3f2eca9677ccb05d29d7aac3f25d4c">EN0_TPSR</a>, 0x41);         <span class="comment">//ei_local-&gt;txStartPage);</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + 0x05, (length &amp; 0xFF));</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + 0x06, (length &gt;&gt; 8));</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#af0c1dd5717007bf73b6c5119dfe7eaf2">outportByteP</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a>, 0x26);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">//kprintf(&quot;SENT\n&quot;);</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">return</span> (length);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="../../dd/d07/ne2k_8c.html#a45a65b2b7a15b7e7c46fd8831528c8d0">  162</a></span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dd/d07/ne2k_8c.html#a45a65b2b7a15b7e7c46fd8831528c8d0">NICtoPC</a>(<span class="keyword">struct</span> <a class="code" href="../../da/d54/structdevice.html">device</a> *dev, <span class="keywordtype">void</span> *packet, <span class="keywordtype">int</span> length, <span class="keywordtype">int</span> nic_addr) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordtype">int</span> i = 0x0;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="../../dd/d1e/objgfx30_8h.html#a81f3b46fa4ddd984830104840a08da82">uInt16</a> *packet16 = (<a class="code" href="../../dd/d1e/objgfx30_8h.html#a81f3b46fa4ddd984830104840a08da82">uInt16</a> *) packet;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <a class="code" href="../../dc/da7/assert_8h.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a>(length);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordflow">if</span> (length &amp; 0x01)</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    length++;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#ab5b4b2e9eb20e5ec41e7784bf5148900">EN0_RCNTLO</a>, (length &amp; 0xFF));</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a13af46188f103450f08ce0346bde34af">EN0_RCNTHI</a>, (length &gt;&gt; 8));</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a352cf7775b146c81c2e1cf81110c9c7e">EN0_RSARLO</a>, nic_addr &amp; 0xFF);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a9834bfab75d2f822b0f684e612917281">EN0_RSARHI</a>, nic_addr &gt;&gt; 8);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a>, 0x0A);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; length / 2; i++) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    packet16[i] = <a class="code" href="../../dc/dac/io_8h.html#afb703b187feb4b92444454df6c3dd9e6">inportWord</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a5b7cdde018b5a4d42f91183d216d3f0d">NE_DATAPORT</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a94ed811925b8c9a71ec0c3590a15868c">EN0_ISR</a>, 0x40);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">return</span> (length);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="../../dd/d07/ne2k_8c.html#a1e664af4b82fdc7971db793f0e9b3ebd">  187</a></span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d07/ne2k_8c.html#a1e664af4b82fdc7971db793f0e9b3ebd">ne2kHandler</a>() {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <a class="code" href="../../dd/d1e/objgfx30_8h.html#a81f3b46fa4ddd984830104840a08da82">uInt16</a> isr = 0x0;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="../../dd/d1e/objgfx30_8h.html#a81f3b46fa4ddd984830104840a08da82">uInt16</a> status = 0x0;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="../../d2/d68/8259_8h.html#a2b9ec30943ddb0a2ef3bd7ccfd2026c0">irqDisable</a>(10);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(<a class="code" href="../../d2/d68/8259_8h.html#a0195451428bc646f820202dc15f25d9f">mPic</a>, <a class="code" href="../../d2/d68/8259_8h.html#a417bb9e0e5c2751570faf6d7b848f977">eoi</a>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(<a class="code" href="../../d2/d68/8259_8h.html#a7d4efc593ecc4ace3d92e1f4ee919b99">sPic</a>, <a class="code" href="../../d2/d68/8259_8h.html#a417bb9e0e5c2751570faf6d7b848f977">eoi</a>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keyword">asm</span>(<span class="stringliteral">&quot;sti&quot;</span>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  isr = <a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a0b931a9b3f618839c02bc888b12fad6b">NE_ISR</a>);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">if</span> ((isr &amp; 0x02) == 0x02) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a0b931a9b3f618839c02bc888b12fad6b">NE_ISR</a>, 0x0A);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    status = <a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(0x280 + <a class="code" href="../../d3/d6c/ne2k_8h.html#ac9016fe03699a7b0ebea5db11ee8aa69">NE_TPSR</a>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">if</span> ((isr &amp; 0x01) == 0x01) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (dp_recv(mDev)) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <a class="code" href="../../da/d28/kprintf_8h.html#a20b56810edb62a6fe59917015c30848f">kprintf</a>(<span class="stringliteral">&quot;Error Getting Packet\n&quot;</span>);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a0b931a9b3f618839c02bc888b12fad6b">NE_ISR</a>, 0x05);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a04dfd3c3cd4a3f758cb038b78231493f">NE_IMR</a>, 0x0);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(mDev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a04dfd3c3cd4a3f758cb038b78231493f">NE_IMR</a>, 0x0B);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keyword">asm</span>(<span class="stringliteral">&quot;cli&quot;</span>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <a class="code" href="../../d2/d68/8259_8h.html#a0ac079c4d770f02e505f4d8569a6960a">irqEnable</a>(10);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> dp_recv(<span class="keyword">struct</span> <a class="code" href="../../da/d54/structdevice.html">device</a> *dev) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <a class="code" href="../../d2/dde/structdp__rcvhdr.html">dp_rcvhdr_t</a> header;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pageno = 0x0, curr = 0x0, next = 0x0;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordtype">int</span> packet_processed = 0x0, r = 0x0;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="../../dd/d1e/objgfx30_8h.html#a81f3b46fa4ddd984830104840a08da82">uInt16</a> <a class="code" href="../../de/d4e/group__ethernet.html#ga4f8559808037803168499a3803900339">eth_type</a> = 0x0;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="../../dd/d1e/objgfx30_8h.html#ada085051a6d9a8e00a2cb256d1af14ba">uInt32</a> length = 0x0;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  pageno = <a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a4c97ad2e89582cb65022a052df40c04a">NE_BNRY</a>) + 1;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">if</span> (pageno == <a class="code" href="../../d3/d6c/ne2k_8h.html#ae05994559a4ee216a39b3307b7911493">stopPage</a>)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    pageno = <a class="code" href="../../d3/d6c/ne2k_8h.html#a819b8c4fa81871ceacc1790d6fd2b2f1">startPage</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a55d8236fd5c94eb16a5a06c3e4b07df1">NE_CMD</a>, 0x40);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    curr = <a class="code" href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a5e30e2969b60a082d50bf3ce80d9d766">NE_CURRENT</a>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a>, 0x0);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> (curr == pageno)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    getblock(dev, pageno, (<span class="keywordtype">size_t</span>) 0, <span class="keyword">sizeof</span>(header), &amp;header);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    getblock(dev, pageno, <span class="keyword">sizeof</span>(header) + 2 * <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d05/unionetheraddr.html">ether_addr_t</a>), <span class="keyword">sizeof</span>(<a class="code" href="../../de/d4e/group__ethernet.html#ga4f8559808037803168499a3803900339">eth_type</a>), &amp;<a class="code" href="../../de/d4e/group__ethernet.html#ga4f8559808037803168499a3803900339">eth_type</a>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    length = (header.<a class="code" href="../../d2/dde/structdp__rcvhdr.html#a8af6620ac2cc37aa6e5e50df90bd8ada">dr_rbcl</a> | (header.<a class="code" href="../../d2/dde/structdp__rcvhdr.html#a860d92ae4272fa62b9bdc51f46e88e1c">dr_rbch</a> &lt;&lt; 8)) - <span class="keyword">sizeof</span>(<a class="code" href="../../d3/d6c/ne2k_8h.html#aa1cf4fa85f0fb91e8c3b87dd06d9b88f">dp_rcvhdr_t</a>);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    next = header.<a class="code" href="../../d2/dde/structdp__rcvhdr.html#aa0a5d988feb06cbcced2a0d35d55add9">dr_next</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">//kprintf(&quot;length: [0x%X:0x%X:0x%X]\n&quot;,header.dr_next,header.dr_status,length);</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (length &lt; 60 || length &gt; 1514) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="../../da/d28/kprintf_8h.html#a20b56810edb62a6fe59917015c30848f">kprintf</a>(<span class="stringliteral">&quot;dp8390: packet with strange length arrived: %d\n&quot;</span>, length);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      next = curr;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (next &lt; startPage || next &gt;= <a class="code" href="../../d3/d6c/ne2k_8h.html#ae05994559a4ee216a39b3307b7911493">stopPage</a>) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <a class="code" href="../../da/d28/kprintf_8h.html#a20b56810edb62a6fe59917015c30848f">kprintf</a>(<span class="stringliteral">&quot;dp8390: strange next page\n&quot;</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      next = curr;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (header.<a class="code" href="../../d2/dde/structdp__rcvhdr.html#ac5986aa8468f04c074e1402b59c78114">dr_status</a> &amp; <a class="code" href="../../d3/d6c/ne2k_8h.html#a3e9285670345a7583ca516cc8f7aafb8">RSR_FO</a>) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <a class="code" href="../../dc/d94/armv6_2kpanic_8c.html#adb9a182aa071791a306163d50d653deb">kpanic</a>(<span class="stringliteral">&quot;dp8390: fifo overrun, resetting receive buffer\n&quot;</span>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      next = curr;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (header.<a class="code" href="../../d2/dde/structdp__rcvhdr.html#ac5986aa8468f04c074e1402b59c78114">dr_status</a> &amp; <a class="code" href="../../d3/d6c/ne2k_8h.html#ac1d77583edd2eba6e96cc7633558e461">RSR_PRX</a>) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      r = dp_pkt2user(dev, pageno, length);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">if</span> (r != <a class="code" href="../../d3/d6c/ne2k_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="../../da/d28/kprintf_8h.html#a20b56810edb62a6fe59917015c30848f">kprintf</a>(<span class="stringliteral">&quot;FRUIT&quot;</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">return</span> (0x0);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      packet_processed = 0x1;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (next == <a class="code" href="../../d3/d6c/ne2k_8h.html#a819b8c4fa81871ceacc1790d6fd2b2f1">startPage</a>)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a4c97ad2e89582cb65022a052df40c04a">NE_BNRY</a>, <a class="code" href="../../d3/d6c/ne2k_8h.html#ae05994559a4ee216a39b3307b7911493">stopPage</a> - 1);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a4c97ad2e89582cb65022a052df40c04a">NE_BNRY</a>, next - 1);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    pageno = next;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  } <span class="keywordflow">while</span> (packet_processed == 0x0);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordflow">return</span> (0x0);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> getblock(<span class="keyword">struct</span> <a class="code" href="../../da/d54/structdevice.html">device</a> *dev, <span class="keywordtype">int</span> page, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> size, <span class="keywordtype">void</span> *dst) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <a class="code" href="../../dd/d1e/objgfx30_8h.html#a81f3b46fa4ddd984830104840a08da82">uInt16</a> *ha = 0x0;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordtype">int</span> i = 0x0;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  ha = (<a class="code" href="../../dd/d1e/objgfx30_8h.html#a81f3b46fa4ddd984830104840a08da82">uInt16</a> *) dst;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  offset = page * <a class="code" href="../../d3/d6c/ne2k_8h.html#abe1b4cb2c953c25ccdc10fcb1aa7e47d">DP_PAGESIZE</a> + offset;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#ab8733e4b199b85891fb58c80bd65967a">NE_RBCR0</a>, size &amp; 0xFF);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#ac023921e5da8473a400c04b2e268c621">NE_RBCR1</a>, size &gt;&gt; 8);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a352cf7775b146c81c2e1cf81110c9c7e">EN0_RSARLO</a>, offset &amp; 0xFF);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a9834bfab75d2f822b0f684e612917281">EN0_RSARHI</a>, offset &gt;&gt; 8);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a55d8236fd5c94eb16a5a06c3e4b07df1">NE_CMD</a>, <a class="code" href="../../d3/d6c/ne2k_8h.html#a60b09a580fe0020e08e133cd8ec0a50d">E8390_RREAD</a> | <a class="code" href="../../d3/d6c/ne2k_8h.html#ac3d2ce0fc9cc0e4e0c6e6a1484f08ddf">E8390_START</a>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  size /= 2;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; size; i++)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    ha[i] = <a class="code" href="../../dc/dac/io_8h.html#afb703b187feb4b92444454df6c3dd9e6">inportWord</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a5b7cdde018b5a4d42f91183d216d3f0d">NE_DATAPORT</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a>(dev-&gt;<a class="code" href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">ioAddr</a> + <a class="code" href="../../d3/d6c/ne2k_8h.html#a94ed811925b8c9a71ec0c3590a15868c">EN0_ISR</a>, 0x40);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;}</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> dp_pkt2user(<span class="keyword">struct</span> <a class="code" href="../../da/d54/structdevice.html">device</a> *dev, <span class="keywordtype">int</span> page, <span class="keywordtype">int</span> length) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordtype">int</span> last = 0x0;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../db/d2a/structnicBuffer.html">nicBuffer</a> *tBuf = 0x0;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  last = page + (<a class="code" href="../../db/d2a/structnicBuffer.html#a959ee09a7a6fc875f3d5d651576f37c4">length</a> - 1) / <a class="code" href="../../d3/d6c/ne2k_8h.html#abe1b4cb2c953c25ccdc10fcb1aa7e47d">DP_PAGESIZE</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">if</span> (last &gt;= <a class="code" href="../../d3/d6c/ne2k_8h.html#ae05994559a4ee216a39b3307b7911493">stopPage</a>) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="../../da/d28/kprintf_8h.html#a20b56810edb62a6fe59917015c30848f">kprintf</a>(<span class="stringliteral">&quot;FOOK STOP PAGE!!!&quot;</span>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    tBuf = <a class="code" href="../../dd/d07/ne2k_8c.html#adae239918a8091c31abf996cee262c92">ne2kAllocBuffer</a>(<a class="code" href="../../db/d2a/structnicBuffer.html#a959ee09a7a6fc875f3d5d651576f37c4">length</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="../../dd/d07/ne2k_8c.html#a45a65b2b7a15b7e7c46fd8831528c8d0">NICtoPC</a>(dev, tBuf-&gt;<a class="code" href="../../db/d2a/structnicBuffer.html#a9679b6c2e76a7617884e422c11aa3eac">buffer</a>, <a class="code" href="../../db/d2a/structnicBuffer.html#a959ee09a7a6fc875f3d5d651576f37c4">length</a>, page * <a class="code" href="../../d3/d6c/ne2k_8h.html#abe1b4cb2c953c25ccdc10fcb1aa7e47d">DP_PAGESIZE</a> + <span class="keyword">sizeof</span>(<a class="code" href="../../d2/dde/structdp__rcvhdr.html">dp_rcvhdr_t</a>));</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d3/d6c/ne2k_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="../../dd/d07/ne2k_8c.html#adae239918a8091c31abf996cee262c92">  312</a></span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keyword">struct </span><a class="code" href="../../db/d2a/structnicBuffer.html">nicBuffer</a> *<a class="code" href="../../dd/d07/ne2k_8c.html#adae239918a8091c31abf996cee262c92">ne2kAllocBuffer</a>(<span class="keywordtype">int</span> <a class="code" href="../../db/d2a/structnicBuffer.html#a959ee09a7a6fc875f3d5d651576f37c4">length</a>) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../db/d2a/structnicBuffer.html">nicBuffer</a> *<a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a> = 0x0;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="../../dc/d88/armv6_2spinlock_8c.html#a71f03d2ba55111c715b6068254847a53">spinLock</a>(&amp;ne2k_spinLock);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">if</span> (ne2kBuffer == 0x0) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    ne2kBuffer = (<span class="keyword">struct </span><a class="code" href="../../db/d2a/structnicBuffer.html">nicBuffer</a> *) <a class="code" href="../../d4/d03/kmalloc_8h.html#a150eab2ac4ce4553e21ca10e7f441762">kmalloc</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../db/d2a/structnicBuffer.html">nicBuffer</a>));</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    ne2kBuffer-&gt;<a class="code" href="../../db/d2a/structnicBuffer.html#ab019ceba7f84eddae7d6b2abc538906a">next</a> = 0x0;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    ne2kBuffer-&gt;<a class="code" href="../../db/d2a/structnicBuffer.html#a959ee09a7a6fc875f3d5d651576f37c4">length</a> = <a class="code" href="../../db/d2a/structnicBuffer.html#a959ee09a7a6fc875f3d5d651576f37c4">length</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    ne2kBuffer-&gt;<a class="code" href="../../db/d2a/structnicBuffer.html#a9679b6c2e76a7617884e422c11aa3eac">buffer</a> = (<span class="keywordtype">char</span> *) <a class="code" href="../../d4/d03/kmalloc_8h.html#a150eab2ac4ce4553e21ca10e7f441762">kmalloc</a>(<a class="code" href="../../db/d2a/structnicBuffer.html#a959ee09a7a6fc875f3d5d651576f37c4">length</a>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="../../dc/d88/armv6_2spinlock_8c.html#ae29ab191c93f9ead066cb462dd2e7247">spinUnlock</a>(&amp;ne2k_spinLock);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">return</span> (ne2kBuffer);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a> = ne2kBuffer; <a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a>-&gt;<a class="code" href="../../db/d2a/structnicBuffer.html#ab019ceba7f84eddae7d6b2abc538906a">next</a> != 0x0; <a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a> = <a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a>-&gt;<a class="code" href="../../db/d2a/structnicBuffer.html#ab019ceba7f84eddae7d6b2abc538906a">next</a>)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      ;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a>-&gt;<a class="code" href="../../db/d2a/structnicBuffer.html#ab019ceba7f84eddae7d6b2abc538906a">next</a> = (<span class="keyword">struct </span><a class="code" href="../../db/d2a/structnicBuffer.html">nicBuffer</a> *) <a class="code" href="../../d4/d03/kmalloc_8h.html#a150eab2ac4ce4553e21ca10e7f441762">kmalloc</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../db/d2a/structnicBuffer.html">nicBuffer</a>));</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a> = <a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a>-&gt;<a class="code" href="../../db/d2a/structnicBuffer.html#ab019ceba7f84eddae7d6b2abc538906a">next</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a>-&gt;<a class="code" href="../../db/d2a/structnicBuffer.html#ab019ceba7f84eddae7d6b2abc538906a">next</a> = 0x0;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a>-&gt;<a class="code" href="../../db/d2a/structnicBuffer.html#a959ee09a7a6fc875f3d5d651576f37c4">length</a> = <a class="code" href="../../db/d2a/structnicBuffer.html#a959ee09a7a6fc875f3d5d651576f37c4">length</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a>-&gt;<a class="code" href="../../db/d2a/structnicBuffer.html#a9679b6c2e76a7617884e422c11aa3eac">buffer</a> = (<span class="keywordtype">char</span> *) <a class="code" href="../../d4/d03/kmalloc_8h.html#a150eab2ac4ce4553e21ca10e7f441762">kmalloc</a>(<a class="code" href="../../db/d2a/structnicBuffer.html#a959ee09a7a6fc875f3d5d651576f37c4">length</a>);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="../../dc/d88/armv6_2spinlock_8c.html#ae29ab191c93f9ead066cb462dd2e7247">spinUnlock</a>(&amp;ne2k_spinLock);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <a class="code" href="../../dc/d88/armv6_2spinlock_8c.html#ae29ab191c93f9ead066cb462dd2e7247">spinUnlock</a>(&amp;ne2k_spinLock);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">return</span> (0x0);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="../../dd/d07/ne2k_8c.html#a954f14d0270247855900254097728c57">  341</a></span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="keyword">struct </span><a class="code" href="../../db/d2a/structnicBuffer.html">nicBuffer</a> *<a class="code" href="../../dd/d07/ne2k_8c.html#a954f14d0270247855900254097728c57">ne2kGetBuffer</a>() {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../db/d2a/structnicBuffer.html">nicBuffer</a> *<a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a> = 0x0;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">if</span> (ne2k_spinLock == 0x1)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> (0x0);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a> = ne2kBuffer;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">if</span> (ne2kBuffer != 0x0)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    ne2kBuffer = ne2kBuffer-&gt;<a class="code" href="../../db/d2a/structnicBuffer.html#ab019ceba7f84eddae7d6b2abc538906a">next</a>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="../../dd/d07/ne2k_8c.html#adeb7b37e43d9b5203408374d8d8ce586">  353</a></span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d07/ne2k_8c.html#adeb7b37e43d9b5203408374d8d8ce586">ne2kFreeBuffer</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d2a/structnicBuffer.html">nicBuffer</a> *<a class="code" href="../../d9/dd0/structbuf.html">buf</a>) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="../../d4/d03/kmalloc_8h.html#aaa9ed6886459604cf73ccdbf6410e487">kfree</a>(<a class="code" href="../../d9/dd0/structbuf.html">buf</a>-&gt;buffer);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <a class="code" href="../../d4/d03/kmalloc_8h.html#aaa9ed6886459604cf73ccdbf6410e487">kfree</a>(<a class="code" href="../../d9/dd0/structbuf.html">buf</a>);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">/***</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"> $Log: ne2k.c,v $</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"> Revision 1.1.1.1  2006/06/01 12:46:12  reddawg</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment"> ubix2</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"> Revision 1.2  2005/10/12 00:13:37  reddawg</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment"> Removed</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"> Revision 1.1.1.1  2005/09/26 17:24:02  reddawg</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"> no message</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"> Revision 1.24  2004/09/28 21:47:56  reddawg</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment"> Fixed deadlock now safe to use in bochs</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"> Revision 1.23  2004/09/16 22:35:28  reddawg</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment"> Demo Release</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"> Revision 1.22  2004/09/15 21:25:33  reddawg</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"> Fixens</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"> Revision 1.21  2004/09/11 19:15:37  reddawg</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"> here you go irq 10 io 240 for your ne2k nic</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"> Revision 1.20  2004/09/07 22:26:04  reddawg</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"> synced in</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"> Revision 1.19  2004/09/07 21:54:38  reddawg</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"> ok reverted back to old scheduling for now....</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"> Revision 1.18  2004/09/06 15:13:25  reddawg</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment"> Last commit before FreeBSD 6.0</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment"> Revision 1.17  2004/08/01 20:40:45  reddawg</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment"> Net related fixes</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment"> Revision 1.16  2004/07/28 22:23:02  reddawg</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment"> make sure it still works before I goto bed</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment"> Revision 1.15  2004/07/17 17:04:47  reddawg</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"> ne2k: added assert hopefully it will help me solve this dma size 0 random error</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment"> Revision 1.14  2004/07/14 12:03:50  reddawg</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment"> ne2k: ne2kInit to ne2k_init</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment"> Changed Startup Routines</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"> Revision 1.13  2004/06/04 10:19:42  reddawg</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment"> notes: we compile again, thank g-d anyways i was about to cry</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"> Revision 1.12  2004/05/21 12:48:22  reddawg</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment"> Cleaned up</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment"> Revision 1.11  2004/05/19 04:07:42  reddawg</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment"> kmalloc(size,pid) no more it is no kmalloc(size); the way it should of been</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment"> Revision 1.10  2004/05/10 02:23:24  reddawg</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment"> Minor Changes To Source Code To Prepare It For Open Source Release</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"> END</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment"> ***/</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="ane2k_8c_html_adae239918a8091c31abf996cee262c92"><div class="ttname"><a href="../../dd/d07/ne2k_8c.html#adae239918a8091c31abf996cee262c92">ne2kAllocBuffer</a></div><div class="ttdeci">struct nicBuffer * ne2kAllocBuffer(int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d07/ne2k_8c_source.html#l00312">ne2k.c:312</a></div></div>
<div class="ttc" id="a8259_8h_html"><div class="ttname"><a href="../../d2/d68/8259_8h.html">8259.h</a></div></div>
<div class="ttc" id="astructdp__rcvhdr_html_aa0a5d988feb06cbcced2a0d35d55add9"><div class="ttname"><a href="../../d2/dde/structdp__rcvhdr.html#aa0a5d988feb06cbcced2a0d35d55add9">dp_rcvhdr::dr_next</a></div><div class="ttdeci">uInt8 dr_next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00039">ne2k.h:39</a></div></div>
<div class="ttc" id="ane2k_8h_html"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html">ne2k.h</a></div></div>
<div class="ttc" id="ane2k_8h_html_ab748b31fd480e8195caac541bc792c2b"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#ab748b31fd480e8195caac541bc792c2b">DP_MAR0</a></div><div class="ttdeci">#define DP_MAR0</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00133">ne2k.h:133</a></div></div>
<div class="ttc" id="aspinlock_8h_html"><div class="ttname"><a href="../../df/d63/spinlock_8h.html">spinlock.h</a></div></div>
<div class="ttc" id="ane2k_8h_html_a60b09a580fe0020e08e133cd8ec0a50d"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a60b09a580fe0020e08e133cd8ec0a50d">E8390_RREAD</a></div><div class="ttdeci">#define E8390_RREAD</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00090">ne2k.h:90</a></div></div>
<div class="ttc" id="ane2k_8h_html_a4c97ad2e89582cb65022a052df40c04a"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a4c97ad2e89582cb65022a052df40c04a">NE_BNRY</a></div><div class="ttdeci">#define NE_BNRY</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00064">ne2k.h:64</a></div></div>
<div class="ttc" id="aio_8h_html_af0c1dd5717007bf73b6c5119dfe7eaf2"><div class="ttname"><a href="../../dc/dac/io_8h.html#af0c1dd5717007bf73b6c5119dfe7eaf2">outportByteP</a></div><div class="ttdeci">void outportByteP(unsigned int port, unsigned char value)</div><div class="ttdoc">outputut one byte to specified port with a delay</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00087">io.c:87</a></div></div>
<div class="ttc" id="astructnicBuffer_html_ab019ceba7f84eddae7d6b2abc538906a"><div class="ttname"><a href="../../db/d2a/structnicBuffer.html#ab019ceba7f84eddae7d6b2abc538906a">nicBuffer::next</a></div><div class="ttdeci">struct nicBuffer * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/netif_8h_source.html#l00053">netif.h:53</a></div></div>
<div class="ttc" id="aobjgfx30_8h_html_ada085051a6d9a8e00a2cb256d1af14ba"><div class="ttname"><a href="../../dd/d1e/objgfx30_8h.html#ada085051a6d9a8e00a2cb256d1af14ba">uInt32</a></div><div class="ttdeci">unsigned long int uInt32</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1e/objgfx30_8h_source.html#l00049">objgfx30.h:49</a></div></div>
<div class="ttc" id="aunionetheraddr_html"><div class="ttname"><a href="../../d0/d05/unionetheraddr.html">etheraddr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00044">ne2k.h:44</a></div></div>
<div class="ttc" id="ane2k_8c_html_adeb7b37e43d9b5203408374d8d8ce586"><div class="ttname"><a href="../../dd/d07/ne2k_8c.html#adeb7b37e43d9b5203408374d8d8ce586">ne2kFreeBuffer</a></div><div class="ttdeci">void ne2kFreeBuffer(struct nicBuffer *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d07/ne2k_8c_source.html#l00353">ne2k.c:353</a></div></div>
<div class="ttc" id="ane2k_8h_html_a9220d4793c7d8dd1844a006713faafee"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a9220d4793c7d8dd1844a006713faafee">E8390_RWRITE</a></div><div class="ttdeci">#define E8390_RWRITE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00091">ne2k.h:91</a></div></div>
<div class="ttc" id="astructnicBuffer_html_a9679b6c2e76a7617884e422c11aa3eac"><div class="ttname"><a href="../../db/d2a/structnicBuffer.html#a9679b6c2e76a7617884e422c11aa3eac">nicBuffer::buffer</a></div><div class="ttdeci">char * buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/netif_8h_source.html#l00055">netif.h:55</a></div></div>
<div class="ttc" id="agdt_8h_html_abe5eb76416aff1d9114e1cdb8b0797fe"><div class="ttname"><a href="../../d5/d4a/gdt_8h.html#abe5eb76416aff1d9114e1cdb8b0797fe">dPresent</a></div><div class="ttdeci">#define dPresent</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4a/gdt_8h_source.html#l00054">gdt.h:54</a></div></div>
<div class="ttc" id="ane2k_8h_html_a13af46188f103450f08ce0346bde34af"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a13af46188f103450f08ce0346bde34af">EN0_RCNTHI</a></div><div class="ttdeci">#define EN0_RCNTHI</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00100">ne2k.h:100</a></div></div>
<div class="ttc" id="astring_8h_html"><div class="ttname"><a href="../../da/d66/string_8h.html">string.h</a></div></div>
<div class="ttc" id="aidt_8h_html"><div class="ttname"><a href="../../d4/d35/idt_8h.html">idt.h</a></div></div>
<div class="ttc" id="aobjgfx30_8h_html_a81f3b46fa4ddd984830104840a08da82"><div class="ttname"><a href="../../dd/d1e/objgfx30_8h.html#a81f3b46fa4ddd984830104840a08da82">uInt16</a></div><div class="ttdeci">unsigned short int uInt16</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1e/objgfx30_8h_source.html#l00048">objgfx30.h:48</a></div></div>
<div class="ttc" id="aio_8h_html_a243f6b6d22cc5948908b764d58efc2b0"><div class="ttname"><a href="../../dc/dac/io_8h.html#a243f6b6d22cc5948908b764d58efc2b0">outportWord</a></div><div class="ttdeci">void outportWord(unsigned int, unsigned short)</div><div class="ttdoc">outputut one word to specified port</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00103">io.c:103</a></div></div>
<div class="ttc" id="a8259_8h_html_a2b9ec30943ddb0a2ef3bd7ccfd2026c0"><div class="ttname"><a href="../../d2/d68/8259_8h.html#a2b9ec30943ddb0a2ef3bd7ccfd2026c0">irqDisable</a></div><div class="ttdeci">void irqDisable(uInt16 irqNo)</div></div>
<div class="ttc" id="ane2k_8h_html_ac023921e5da8473a400c04b2e268c621"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#ac023921e5da8473a400c04b2e268c621">NE_RBCR1</a></div><div class="ttdeci">#define NE_RBCR1</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00069">ne2k.h:69</a></div></div>
<div class="ttc" id="ane2k_8h_html_a649d4943e589ed684b2e0faf811dc0af"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a649d4943e589ed684b2e0faf811dc0af">DP_MAR6</a></div><div class="ttdeci">#define DP_MAR6</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00139">ne2k.h:139</a></div></div>
<div class="ttc" id="aio_8h_html_a8acc1a06073db2e7b92ffbd00fbd0cf1"><div class="ttname"><a href="../../dc/dac/io_8h.html#a8acc1a06073db2e7b92ffbd00fbd0cf1">outportByte</a></div><div class="ttdeci">void outportByte(unsigned int, unsigned char)</div><div class="ttdoc">outputut one byte to specified port</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00072">io.c:72</a></div></div>
<div class="ttc" id="ane2k_8h_html_afc53aa624a738deb114bf3d20257f108"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#afc53aa624a738deb114bf3d20257f108">DP_MAR7</a></div><div class="ttdeci">#define DP_MAR7</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00140">ne2k.h:140</a></div></div>
<div class="ttc" id="akmalloc_8h_html_aaa9ed6886459604cf73ccdbf6410e487"><div class="ttname"><a href="../../d4/d03/kmalloc_8h.html#aaa9ed6886459604cf73ccdbf6410e487">kfree</a></div><div class="ttdeci">void kfree(void *baseAddr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1a/kmalloc_8c_source.html#l00342">kmalloc.c:342</a></div></div>
<div class="ttc" id="ane2k_8h_html_a6c3f2eca9677ccb05d29d7aac3f25d4c"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a6c3f2eca9677ccb05d29d7aac3f25d4c">EN0_TPSR</a></div><div class="ttdeci">#define EN0_TPSR</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00105">ne2k.h:105</a></div></div>
<div class="ttc" id="aassert_8h_html_ad6d5aaa966ca7424f7cb9bd01f2c838b"><div class="ttname"><a href="../../dc/da7/assert_8h.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a></div><div class="ttdeci">#define assert(e)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da7/assert_8h_source.html#l00064">assert.h:64</a></div></div>
<div class="ttc" id="aassert_8h_html"><div class="ttname"><a href="../../dc/da7/assert_8h.html">assert.h</a></div></div>
<div class="ttc" id="ane2k_8h_html_a94ed811925b8c9a71ec0c3590a15868c"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a94ed811925b8c9a71ec0c3590a15868c">EN0_ISR</a></div><div class="ttdeci">#define EN0_ISR</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00101">ne2k.h:101</a></div></div>
<div class="ttc" id="aarmv6_2spinlock_8c_html_ae29ab191c93f9ead066cb462dd2e7247"><div class="ttname"><a href="../../dc/d88/armv6_2spinlock_8c.html#ae29ab191c93f9ead066cb462dd2e7247">spinUnlock</a></div><div class="ttdeci">void spinUnlock(spinLock_t *lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d88/armv6_2spinlock_8c_source.html#l00036">spinlock.c:36</a></div></div>
<div class="ttc" id="astructdevice_html"><div class="ttname"><a href="../../da/d54/structdevice.html">device</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfa/device_8old_8h_source.html#l00034">device.old.h:34</a></div></div>
<div class="ttc" id="ane2k_8h_html_a4991431a50163bff66590bf8a7fb3c72"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a4991431a50163bff66590bf8a7fb3c72">NE_PSTOP</a></div><div class="ttdeci">#define NE_PSTOP</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00063">ne2k.h:63</a></div></div>
<div class="ttc" id="aspinlock_8h_html_a0fe85a4f3642683148b25916d6c5eafd"><div class="ttname"><a href="../../df/d63/spinlock_8h.html#a0fe85a4f3642683148b25916d6c5eafd">SPIN_LOCK_INITIALIZER</a></div><div class="ttdeci">#define SPIN_LOCK_INITIALIZER</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d63/spinlock_8h_source.html#l00036">spinlock.h:36</a></div></div>
<div class="ttc" id="aarmv6_2kpanic_8c_html_adb9a182aa071791a306163d50d653deb"><div class="ttname"><a href="../../dc/d94/armv6_2kpanic_8c.html#adb9a182aa071791a306163d50d653deb">kpanic</a></div><div class="ttdeci">void kpanic(const char *fmt,...)</div><div class="ttdoc">print panic message and halt system</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d94/armv6_2kpanic_8c_source.html#l00041">kpanic.c:41</a></div></div>
<div class="ttc" id="astructdevice_html_a9467302b748ed3627bae8e3ecee7af87"><div class="ttname"><a href="../../da/d54/structdevice.html#a9467302b748ed3627bae8e3ecee7af87">device::ioAddr</a></div><div class="ttdeci">uInt16 ioAddr</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfa/device_8old_8h_source.html#l00036">device.old.h:36</a></div></div>
<div class="ttc" id="ane2k_8h_html_a04dfd3c3cd4a3f758cb038b78231493f"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a04dfd3c3cd4a3f758cb038b78231493f">NE_IMR</a></div><div class="ttdeci">#define NE_IMR</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00073">ne2k.h:73</a></div></div>
<div class="ttc" id="ane2k_8c_html_a954f14d0270247855900254097728c57"><div class="ttname"><a href="../../dd/d07/ne2k_8c.html#a954f14d0270247855900254097728c57">ne2kGetBuffer</a></div><div class="ttdeci">struct nicBuffer * ne2kGetBuffer()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d07/ne2k_8c_source.html#l00341">ne2k.c:341</a></div></div>
<div class="ttc" id="ane2k_8h_html_ab8733e4b199b85891fb58c80bd65967a"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#ab8733e4b199b85891fb58c80bd65967a">NE_RBCR0</a></div><div class="ttdeci">#define NE_RBCR0</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00068">ne2k.h:68</a></div></div>
<div class="ttc" id="ane2k_8h_html_a3e9285670345a7583ca516cc8f7aafb8"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a3e9285670345a7583ca516cc8f7aafb8">RSR_FO</a></div><div class="ttdeci">#define RSR_FO</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00050">ne2k.h:50</a></div></div>
<div class="ttc" id="aarmv6_2spinlock_8c_html_a71f03d2ba55111c715b6068254847a53"><div class="ttname"><a href="../../dc/d88/armv6_2spinlock_8c.html#a71f03d2ba55111c715b6068254847a53">spinLock</a></div><div class="ttdeci">void spinLock(spinLock_t *lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d88/armv6_2spinlock_8c_source.html#l00055">spinlock.c:55</a></div></div>
<div class="ttc" id="ane2k_8h_html_a2dcfc12834d5a417dcf43e2ca248f0cd"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a2dcfc12834d5a417dcf43e2ca248f0cd">DP_CNTR0</a></div><div class="ttdeci">#define DP_CNTR0</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00142">ne2k.h:142</a></div></div>
<div class="ttc" id="aio_8h_html_a77b934268de1b3ecdcf3f275413b3108"><div class="ttname"><a href="../../dc/dac/io_8h.html#a77b934268de1b3ecdcf3f275413b3108">inportByte</a></div><div class="ttdeci">unsigned char inportByte(unsigned int)</div><div class="ttdoc">input one byte from specified port</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00038">io.c:38</a></div></div>
<div class="ttc" id="ane2k_8h_html_a8336bb3cb0a54a93522379477340fdec"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a8336bb3cb0a54a93522379477340fdec">DP_CURR</a></div><div class="ttdeci">#define DP_CURR</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00132">ne2k.h:132</a></div></div>
<div class="ttc" id="akpanic_8h_html"><div class="ttname"><a href="../../d3/d24/kpanic_8h.html">kpanic.h</a></div></div>
<div class="ttc" id="anetif_8h_html"><div class="ttname"><a href="../../d9/d69/netif_8h.html">netif.h</a></div></div>
<div class="ttc" id="ane2k_8c_html_af6446fd497eb16b637ebed77c7a0aeaf"><div class="ttname"><a href="../../dd/d07/ne2k_8c.html#af6446fd497eb16b637ebed77c7a0aeaf">PCtoNIC</a></div><div class="ttdeci">int PCtoNIC(struct device *dev, void *packet, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d07/ne2k_8c_source.html#l00113">ne2k.c:113</a></div></div>
<div class="ttc" id="ane2k_8h_html_aa1cf4fa85f0fb91e8c3b87dd06d9b88f"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#aa1cf4fa85f0fb91e8c3b87dd06d9b88f">dp_rcvhdr_t</a></div><div class="ttdeci">struct dp_rcvhdr dp_rcvhdr_t</div></div>
<div class="ttc" id="akprintf_8h_html"><div class="ttname"><a href="../../da/d28/kprintf_8h.html">kprintf.h</a></div></div>
<div class="ttc" id="agroup__ethernet_html_ga4f8559808037803168499a3803900339"><div class="ttname"><a href="../../de/d4e/group__ethernet.html#ga4f8559808037803168499a3803900339">eth_type</a></div><div class="ttdeci">eth_type</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/prot_2ethernet_8h_source.html#l00108">ethernet.h:108</a></div></div>
<div class="ttc" id="astructdp__rcvhdr_html_a860d92ae4272fa62b9bdc51f46e88e1c"><div class="ttname"><a href="../../d2/dde/structdp__rcvhdr.html#a860d92ae4272fa62b9bdc51f46e88e1c">dp_rcvhdr::dr_rbch</a></div><div class="ttdeci">uInt8 dr_rbch</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00041">ne2k.h:41</a></div></div>
<div class="ttc" id="ane2k_8h_html_ae0e015081ca05ecec4bf833265485fb9"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#ae0e015081ca05ecec4bf833265485fb9">NE_RCR</a></div><div class="ttdeci">#define NE_RCR</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00070">ne2k.h:70</a></div></div>
<div class="ttc" id="ane2k_8h_html_ae99a5201b20f9fd87b195c1074a643ec"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#ae99a5201b20f9fd87b195c1074a643ec">DP_CNTR1</a></div><div class="ttdeci">#define DP_CNTR1</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00143">ne2k.h:143</a></div></div>
<div class="ttc" id="adevice_8old_8h_html"><div class="ttname"><a href="../../df/dfa/device_8old_8h.html">device.old.h</a></div></div>
<div class="ttc" id="astructbuf_html"><div class="ttname"><a href="../../d9/dd0/structbuf.html">buf</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00035">buf.h:35</a></div></div>
<div class="ttc" id="astructnicBuffer_html"><div class="ttname"><a href="../../db/d2a/structnicBuffer.html">nicBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/netif_8h_source.html#l00052">netif.h:52</a></div></div>
<div class="ttc" id="avitals_8h_html"><div class="ttname"><a href="../../d2/d48/vitals_8h.html">vitals.h</a></div></div>
<div class="ttc" id="aobjgfx30_8h_html_aa4e0f27a9aca905e340c06d2dcae843c"><div class="ttname"><a href="../../dd/d1e/objgfx30_8h.html#aa4e0f27a9aca905e340c06d2dcae843c">uInt8</a></div><div class="ttdeci">unsigned char uInt8</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1e/objgfx30_8h_source.html#l00047">objgfx30.h:47</a></div></div>
<div class="ttc" id="astructdp__rcvhdr_html_ac5986aa8468f04c074e1402b59c78114"><div class="ttname"><a href="../../d2/dde/structdp__rcvhdr.html#ac5986aa8468f04c074e1402b59c78114">dp_rcvhdr::dr_status</a></div><div class="ttdeci">uInt8 dr_status</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00038">ne2k.h:38</a></div></div>
<div class="ttc" id="a8259_8h_html_a417bb9e0e5c2751570faf6d7b848f977"><div class="ttname"><a href="../../d2/d68/8259_8h.html#a417bb9e0e5c2751570faf6d7b848f977">eoi</a></div><div class="ttdeci">#define eoi</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d68/8259_8h_source.html#l00038">8259.h:38</a></div></div>
<div class="ttc" id="ane2k_8h_html_ac9016fe03699a7b0ebea5db11ee8aa69"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#ac9016fe03699a7b0ebea5db11ee8aa69">NE_TPSR</a></div><div class="ttdeci">#define NE_TPSR</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00065">ne2k.h:65</a></div></div>
<div class="ttc" id="ane2k_8h_html_abe1b4cb2c953c25ccdc10fcb1aa7e47d"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#abe1b4cb2c953c25ccdc10fcb1aa7e47d">DP_PAGESIZE</a></div><div class="ttdeci">#define DP_PAGESIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00147">ne2k.h:147</a></div></div>
<div class="ttc" id="ane2k_8h_html_aea9754b13e450b45d0eb6d79e0a1f4aa"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#aea9754b13e450b45d0eb6d79e0a1f4aa">NE_TCR</a></div><div class="ttdeci">#define NE_TCR</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00071">ne2k.h:71</a></div></div>
<div class="ttc" id="ane2k_8h_html_a55d8236fd5c94eb16a5a06c3e4b07df1"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a55d8236fd5c94eb16a5a06c3e4b07df1">NE_CMD</a></div><div class="ttdeci">#define NE_CMD</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00061">ne2k.h:61</a></div></div>
<div class="ttc" id="ane2k_8h_html_aa1d4735355686cbdc2d6bf145c413db3"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#aa1d4735355686cbdc2d6bf145c413db3">ne2kISR</a></div><div class="ttdeci">void ne2kISR()</div></div>
<div class="ttc" id="a8259_8h_html_a7d4efc593ecc4ace3d92e1f4ee919b99"><div class="ttname"><a href="../../d2/d68/8259_8h.html#a7d4efc593ecc4ace3d92e1f4ee919b99">sPic</a></div><div class="ttdeci">#define sPic</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d68/8259_8h_source.html#l00036">8259.h:36</a></div></div>
<div class="ttc" id="ane2k_8h_html_ab56dccd8151d77ad3dbd832b65601af0"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#ab56dccd8151d77ad3dbd832b65601af0">DP_CNTR2</a></div><div class="ttdeci">#define DP_CNTR2</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00144">ne2k.h:144</a></div></div>
<div class="ttc" id="astructdevice_html_a893bc785f272d1fedb2b4c14e31a7f35"><div class="ttname"><a href="../../da/d54/structdevice.html#a893bc785f272d1fedb2b4c14e31a7f35">device::irq</a></div><div class="ttdeci">uInt32 irq</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfa/device_8old_8h_source.html#l00037">device.old.h:37</a></div></div>
<div class="ttc" id="aio_8h_html_afb703b187feb4b92444454df6c3dd9e6"><div class="ttname"><a href="../../dc/dac/io_8h.html#afb703b187feb4b92444454df6c3dd9e6">inportWord</a></div><div class="ttdeci">unsigned short inportWord(unsigned int)</div><div class="ttdoc">input one word from specified port</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00055">io.c:55</a></div></div>
<div class="ttc" id="ane2k_8h_html_a1a62c9c151ca3a621f0683d0eaba12fe"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a1a62c9c151ca3a621f0683d0eaba12fe">DP_MAR3</a></div><div class="ttdeci">#define DP_MAR3</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00136">ne2k.h:136</a></div></div>
<div class="ttc" id="astructdp__rcvhdr_html_a8af6620ac2cc37aa6e5e50df90bd8ada"><div class="ttname"><a href="../../d2/dde/structdp__rcvhdr.html#a8af6620ac2cc37aa6e5e50df90bd8ada">dp_rcvhdr::dr_rbcl</a></div><div class="ttdeci">uInt8 dr_rbcl</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00040">ne2k.h:40</a></div></div>
<div class="ttc" id="ane2k_8h_html_ac1d77583edd2eba6e96cc7633558e461"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#ac1d77583edd2eba6e96cc7633558e461">RSR_PRX</a></div><div class="ttdeci">#define RSR_PRX</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00051">ne2k.h:51</a></div></div>
<div class="ttc" id="astructnicBuffer_html_a959ee09a7a6fc875f3d5d651576f37c4"><div class="ttname"><a href="../../db/d2a/structnicBuffer.html#a959ee09a7a6fc875f3d5d651576f37c4">nicBuffer::length</a></div><div class="ttdeci">int length</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/netif_8h_source.html#l00054">netif.h:54</a></div></div>
<div class="ttc" id="agdt_8h_html_a7eb6dc7004c613df58764da5df7d85d8"><div class="ttname"><a href="../../d5/d4a/gdt_8h.html#a7eb6dc7004c613df58764da5df7d85d8">dInt</a></div><div class="ttdeci">#define dInt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4a/gdt_8h_source.html#l00043">gdt.h:43</a></div></div>
<div class="ttc" id="ane2k_8h_html_ace5a77fb812564273e5304dd138ac29f"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#ace5a77fb812564273e5304dd138ac29f">DP_MAR4</a></div><div class="ttdeci">#define DP_MAR4</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00137">ne2k.h:137</a></div></div>
<div class="ttc" id="ane2k_8h_html_a759300669dab4522e8c261d764303a9b"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a759300669dab4522e8c261d764303a9b">NE_DCR</a></div><div class="ttdeci">#define NE_DCR</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00072">ne2k.h:72</a></div></div>
<div class="ttc" id="ane2k_8h_html_a9834bfab75d2f822b0f684e612917281"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a9834bfab75d2f822b0f684e612917281">EN0_RSARHI</a></div><div class="ttdeci">#define EN0_RSARHI</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00104">ne2k.h:104</a></div></div>
<div class="ttc" id="ane2k_8h_html_a0ec81b4dbe6150ae308588ed7de0f686"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a0ec81b4dbe6150ae308588ed7de0f686">DP_MAR5</a></div><div class="ttdeci">#define DP_MAR5</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00138">ne2k.h:138</a></div></div>
<div class="ttc" id="a8259_8h_html_a7d84962c1a1c225344a94545309f92fc"><div class="ttname"><a href="../../d2/d68/8259_8h.html#a7d84962c1a1c225344a94545309f92fc">mVec</a></div><div class="ttdeci">#define mVec</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d68/8259_8h_source.html#l00041">8259.h:41</a></div></div>
<div class="ttc" id="ane2k_8h_html_a5e30e2969b60a082d50bf3ce80d9d766"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a5e30e2969b60a082d50bf3ce80d9d766">NE_CURRENT</a></div><div class="ttdeci">#define NE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00067">ne2k.h:67</a></div></div>
<div class="ttc" id="ane2k_8h_html_a352cf7775b146c81c2e1cf81110c9c7e"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a352cf7775b146c81c2e1cf81110c9c7e">EN0_RSARLO</a></div><div class="ttdeci">#define EN0_RSARLO</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00103">ne2k.h:103</a></div></div>
<div class="ttc" id="akmalloc_8h_html_a150eab2ac4ce4553e21ca10e7f441762"><div class="ttname"><a href="../../d4/d03/kmalloc_8h.html#a150eab2ac4ce4553e21ca10e7f441762">kmalloc</a></div><div class="ttdeci">void * kmalloc(uInt32 len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1a/kmalloc_8c_source.html#l00241">kmalloc.c:241</a></div></div>
<div class="ttc" id="astructspinLock_html"><div class="ttname"><a href="../../d1/daf/structspinLock.html">spinLock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d63/spinlock_8h_source.html#l00041">spinlock.h:41</a></div></div>
<div class="ttc" id="aidt_8h_html_a174a47ed653fc64fff6b5bb1b895c2cf"><div class="ttname"><a href="../../d4/d35/idt_8h.html#a174a47ed653fc64fff6b5bb1b895c2cf">setVector</a></div><div class="ttdeci">void setVector(void *handler, unsigned char interrupt, unsigned short controlMajor)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d05/idt_8c_source.html#l00208">idt.c:208</a></div></div>
<div class="ttc" id="ane2k_8h_html_a0b931a9b3f618839c02bc888b12fad6b"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a0b931a9b3f618839c02bc888b12fad6b">NE_ISR</a></div><div class="ttdeci">#define NE_ISR</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00066">ne2k.h:66</a></div></div>
<div class="ttc" id="aio_8h_html"><div class="ttname"><a href="../../dc/dac/io_8h.html">io.h</a></div></div>
<div class="ttc" id="ane2k_8c_html_a1e664af4b82fdc7971db793f0e9b3ebd"><div class="ttname"><a href="../../dd/d07/ne2k_8c.html#a1e664af4b82fdc7971db793f0e9b3ebd">ne2kHandler</a></div><div class="ttdeci">void ne2kHandler()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d07/ne2k_8c_source.html#l00187">ne2k.c:187</a></div></div>
<div class="ttc" id="a8259_8h_html_a0ac079c4d770f02e505f4d8569a6960a"><div class="ttname"><a href="../../d2/d68/8259_8h.html#a0ac079c4d770f02e505f4d8569a6960a">irqEnable</a></div><div class="ttdeci">void irqEnable(uInt16 irqNo)</div></div>
<div class="ttc" id="ane2k_8c_html_a033e069050ace667acb10ed9ffc8ac6c"><div class="ttname"><a href="../../dd/d07/ne2k_8c.html#a033e069050ace667acb10ed9ffc8ac6c">ne2k_init</a></div><div class="ttdeci">int ne2k_init()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d07/ne2k_8c_source.html#l00068">ne2k.c:68</a></div></div>
<div class="ttc" id="ane2k_8h_html_aba51915c87d64af47fb1cc59348961c9"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a></div><div class="ttdeci">#define OK</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00054">ne2k.h:54</a></div></div>
<div class="ttc" id="ane2k_8h_html_a6aff3543036b8ddf515d243b0e1ddf34"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a6aff3543036b8ddf515d243b0e1ddf34">DP_MAR2</a></div><div class="ttdeci">#define DP_MAR2</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00135">ne2k.h:135</a></div></div>
<div class="ttc" id="ane2k_8h_html_a5b7cdde018b5a4d42f91183d216d3f0d"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a5b7cdde018b5a4d42f91183d216d3f0d">NE_DATAPORT</a></div><div class="ttdeci">#define NE_DATAPORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00125">ne2k.h:125</a></div></div>
<div class="ttc" id="akprintf_8h_html_a20b56810edb62a6fe59917015c30848f"><div class="ttname"><a href="../../da/d28/kprintf_8h.html#a20b56810edb62a6fe59917015c30848f">kprintf</a></div><div class="ttdeci">int kprintf(const char *,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d87/kprintf_8c_source.html#l00259">kprintf.c:259</a></div></div>
<div class="ttc" id="ane2k_8h_html_a78aa15aa3cd9df670d1724be92b0157d"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a78aa15aa3cd9df670d1724be92b0157d">NE_PSTART</a></div><div class="ttdeci">#define NE_PSTART</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00062">ne2k.h:62</a></div></div>
<div class="ttc" id="ane2k_8h_html_ab5b4b2e9eb20e5ec41e7784bf5148900"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#ab5b4b2e9eb20e5ec41e7784bf5148900">EN0_RCNTLO</a></div><div class="ttdeci">#define EN0_RCNTLO</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00099">ne2k.h:99</a></div></div>
<div class="ttc" id="anetif_8h_html_a4a11421d92a3c6d8d9fae9db3bb9f299"><div class="ttname"><a href="../../d9/d69/netif_8h.html#a4a11421d92a3c6d8d9fae9db3bb9f299">tmpBuf</a></div><div class="ttdeci">struct nicBuffer * tmpBuf</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc8/ethernetif_8c_source.html#l00063">ethernetif.c:63</a></div></div>
<div class="ttc" id="agdt_8h_html_a5ee8638767e24765a2690483745d60d0"><div class="ttname"><a href="../../d5/d4a/gdt_8h.html#a5ee8638767e24765a2690483745d60d0">dDpl0</a></div><div class="ttdeci">#define dDpl0</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4a/gdt_8h_source.html#l00053">gdt.h:53</a></div></div>
<div class="ttc" id="ane2k_8c_html_a45a65b2b7a15b7e7c46fd8831528c8d0"><div class="ttname"><a href="../../dd/d07/ne2k_8c.html#a45a65b2b7a15b7e7c46fd8831528c8d0">NICtoPC</a></div><div class="ttdeci">int NICtoPC(struct device *dev, void *packet, int length, int nic_addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d07/ne2k_8c_source.html#l00162">ne2k.c:162</a></div></div>
<div class="ttc" id="akmalloc_8h_html"><div class="ttname"><a href="../../d4/d03/kmalloc_8h.html">kmalloc.h</a></div></div>
<div class="ttc" id="ane2k_8h_html_a819b8c4fa81871ceacc1790d6fd2b2f1"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a819b8c4fa81871ceacc1790d6fd2b2f1">startPage</a></div><div class="ttdeci">#define startPage</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00057">ne2k.h:57</a></div></div>
<div class="ttc" id="ane2k_8h_html_ae05994559a4ee216a39b3307b7911493"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#ae05994559a4ee216a39b3307b7911493">stopPage</a></div><div class="ttdeci">#define stopPage</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00058">ne2k.h:58</a></div></div>
<div class="ttc" id="ane2k_8h_html_a6e5cdffc808e98e09eca1efad797abf4"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#a6e5cdffc808e98e09eca1efad797abf4">DP_MAR1</a></div><div class="ttdeci">#define DP_MAR1</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00134">ne2k.h:134</a></div></div>
<div class="ttc" id="a8259_8h_html_a0195451428bc646f820202dc15f25d9f"><div class="ttname"><a href="../../d2/d68/8259_8h.html#a0195451428bc646f820202dc15f25d9f">mPic</a></div><div class="ttdeci">#define mPic</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d68/8259_8h_source.html#l00034">8259.h:34</a></div></div>
<div class="ttc" id="ane2k_8h_html_ac3d2ce0fc9cc0e4e0c6e6a1484f08ddf"><div class="ttname"><a href="../../d3/d6c/ne2k_8h.html#ac3d2ce0fc9cc0e4e0c6e6a1484f08ddf">E8390_START</a></div><div class="ttdeci">#define E8390_START</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00089">ne2k.h:89</a></div></div>
<div class="ttc" id="astructdp__rcvhdr_html"><div class="ttname"><a href="../../d2/dde/structdp__rcvhdr.html">dp_rcvhdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6c/ne2k_8h_source.html#l00036">ne2k.h:36</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_3072dafebbfa7892dc4725aed51ee84c.html">isa</a></li><li class="navelem"><a class="el" href="../../dd/d07/ne2k_8c.html">ne2k.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
